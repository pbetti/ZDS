ееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееее ANIMAL  BBC                  ANIMAL  DAT   
                BBCBASICCOM   t  	 
      BBCBASICTXT   x         BBCDIST MAC   "              CONVERT COM                  CRC     COM                  CRCKLISTCRC                   F-INDEX BBC   5   ! "          F-RAND0 BBC   #                F-RAND1 BBC   $ %              F-RAND2 BBC   ?& ' ( )          F-RSER1 BBC   *                F-RSER2 BBC   	+                F-RSTD  BBC   	,                F-WESER1BBC   -               ееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееее F-WESER2BBC   . /              F-WSER1 BBC   0                F-WSER2 BBC   1 2              F-WSTD  BBC   3 4              MERGE   BBC   5                READ    ME    6                SORT    BBC   7                SORTREALBBC   8               ееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееN" Њ ЌT~CТ K=1Ь хж тquestionр э АA$(K),2)<>"\Q"'ъ A$=¤query("Is it "+¤art(БA$(K),3)))4з A$="Y" Њ с "Why not try another one?"'' ‹ тnewэ Ј;	"ф ***,ф NEW ANIMAL	6ф ***
@Э тnewGJи "OK, I give up."'"Tell me what animal you were thinking"'"of ",V$TV$=¤strip(¤convlc(V$))<^с "Please tell me a question that would"'"distinguish ";'hс ¤art(V$);" from ";¤art(БA$(K),3))rи X$:X$=¤capital(X$)"|з ВX$,1)="?" Њ X$=АX$,©(X$)-1)6†A$=¤query("For "+¤art(V$)+" the answer would be "):Z=Z+1Фэ A$(Z)="" „ Z=MAX+1ЮЩ# 0иат;2ьЬ 4,\QDoes it fly\N2\Y3\,\Agoldfish,\Asparrow,;ф. NOW THE FUNCTIONS;/$Э ¤art(noun$):ф Indefinite article appender;.з §"AEIOUaeiou",Аnoun$,1)) Њ ="an "+noun$ ‹ ="a "+noun$8;&BЭ ¤strip(name$):ф Article stripperLname$=¤nospace(name$)Vк AT$,Z
`ч ЌtRDjх Z=Z+1:у AT$tэ AT$=Аname$,©(AT$)) „ Z=10#~з Z<10 Њ name$=Бname$,1+©(AT$))€=¤nospace(name$)-’Ь A ,AN ,THE ,a ,an ,the ,An ,The ,THe ,,њ;¦Э ¤nospace(name$)°name$="ееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееђз A$="Y" Њ B$="N"љз A$="N" Њ B$="Y"¤Z1=»(A$(0))®A$(0)=Г(Z1+2)ёA$(Z1)=A$(K)ВA$(Z1+1)="\A"+V$1МA$(K)="\Q"+X$+"\"+A$+Г(Z1+1)+"\"+B$+Г(Z1)+"\"Цба;	кф ***фф PRINT QUESTIONS	юф ***Э тquestionQ$=A$(K)"C$=¤query(БQ$,3,§Q$,"\",3)-3))&T$="\"+C$0X=§Q$,T$,3):Y=§Q$,"\",X+1)DK=»(БQ$,X+2,Y-X-2))NбX;	bф ***lф READ DATA FILE	vф ***ЂЭ тread%Љс "Just let me refresh my memory"”Z=0ћх и #X,A$(Z):Z=Z+1 Ёэ Е#X „ Z=MAX+1 „ A$(Z-1)=""ІЩ #XјбЖ; "+name$єх name$=Бname$,2)Дэ Аname$,1)<>" "
О=name$Ш;вЭ ¤convlc(name$)мк L%,A%,B$цг L%=1 ё ©(name$) A%=—(Бname$,L%))
з A%<97 Ђ A%>64 Њ A%=A%+32B$=B$+Ѕ(A%):н L%=B$(;2Э ¤capital(name$)<к A$"Fname$=¤nospace(¤convlc(name$))Pз —(name$)<97 Њ =name$ZA$=Ѕ(—(name$)-32)dA$=A$+Бname$,2)n=A$x;‚Э ¤query(prompt$)Њк A$–х' с prompt$;:и A$:A$=А¤capital(A$),1)Єэ A$="Y" „ A$="N"ґ=A$ яя¤їHАH

ФH		ЮH                                                 ееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееее
 Ы:@%=10:ю 0:с Љ15)"ANIMAL"2 с "Creative Computing Morristown New Jersey"''( ф by Nathan Teichholtz & Steve North0( ф from an original idea by Arthur Luehrmann.52 ф Modified by Chris Atkinson and Richard Russell.< :,F о … з џ=17 Њ ЌT~C ‹ с:ц:с" at line ";ћ:аP MAX=(“-ёP)/40Z Ю A$(MAX)d с "Play 'Guess the Animal'"n :x X=Ћ("ANIMAL.DAT")(‚ з X<>0 тread ‹ г I=0 ё 3:у A$(I):н IЊ N=»(A$(0))– :	  ф ***Є ф MAIN CONTROL SECTION	ґ ф ***ѕ х9И з ¤query("Are you thinking of an animal ")="	Рф ***Ъф PRINT NAME OF ANIMAL	дф ***оЭ тprintшс Љ10*X);БA$(I),3);X=(X+1) ѓ 4б;	 ф ****ф LIST CONTENTS	4ф ***	>о … ‡%Hс ' "Animals I already know are:"RX=0:I=0\х I=I+1fз АA$(I),2)="\A" Њ тprintpэ A$(I)="" „ I=MAX)zс ' "Room for ";Ё((MAX-I)/3);" more.":„з ¤query("Do you want to save these on disk")<>"Y" Њ аЋ:	ф ***ўф DUMP FILE IF REQUESTED	¬ф ***%¶з Ћ"ANIMAL.DAT" Њ *ERA ANIMAL.DAT2АX=®"ANIMAL.DAT":Z=0:з X=0 с "Directory full":аКх с# X,A$(Z)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \QIs it furry\Y45\N44\\QDoes it eat fish\Y31\N30\\Arobin\QDoes it have eight legs\Y39\N38\\Akangaroo\QDoes it have eight tentacles\N41\Y40\\QIs its shell almost round\Y35\N34\\QDoes it quack\Y49\N48\\Aseagull\QDoes it eat ants\Y47\N46\\Acat\Alobster\Acrab\QDoes it bite\Y67\N66\\Awasp\QDoes it have a forked tongue\N43\Y42\\Aspider\Aoctopus\QDoes it have a nasty smell\Y53\N52\\Asnake\Aworm\Adolphin\QDoes it build dams\N57\Y56\\QDoes it bark\N51\Y50\\Aanteater\Asparrow\Aduck\Adog\QГ4Г{ГҐГКГzГsГ…ГrЭеэеЩЕХеЩхН сЩбСБЩэбЭбЙ><OкIН·_В 	НЗWrong processor$Wrong CP/M version$З  !  ЙЙЕНБЙЕеяНбБ·7АґµИЕ>явёВњБ+аХеН=Нб}Ж _НС{Ж _НЙ  !  Й                                   PГ*ГГмГ	ГUГLГТ	Гц	ГбГa6Г$4Г4Г>4Г3! =щ6
,6	,Їw, ь>72ю=!w"о=Нљ8нSд="Ь=Но	ВЪНUBBC BASIC (Z80) Version 3.00  
(C) Copyright R.T.Russell 1987
 ц7н{д=Нu9!ю=~жц0wнb"м="ф=*к="ж=|µ(еН/бнKя= 	Ъ"к=> Нћ
! ;Н­9Ї2ы=э! ;НлНў&|µ("ж= <НЇGK*ж=| г Can't match г г   ё  д о syntax о line  Ь х  # НТ	Н8~·(q#^#Vzі(++л7нBл0`ЕН’	Бдэ#Нѕ Щ}2ю=Г™юO(пН8Нў&юз>  э#Нў&лэеб>Е н±y/Бл_x± ЩЭ!ю=  Щ>ЕХе~·({#^#V++Хл7нBлСТNGzіК™###ХеЇёэеСД]$бСэеМ
эб=На8б^ СБёНц	НЩ*Ь=н[а=~·(0#N#Fx±К™лq#p#Ще	ЪЩБq#p#л++ЇGN	ле$нrбл8ТН	М л6я#6ян[а=Щ*Ь=Ny·КЩл##^#V#Хл"ж=ЩС#s#r# >Ќн± ЫЕееэбЩНP%ЩDM*а=^#V#л·нBл^#V#8сл(НUFailed at  *ж=Н+Н—
СХН#бБ¶Н"к=y2я=)НUprogram
 Но	*Ь=е###ь >н± Э}бwНЗ	Г™НЗ >Н­	Нц	НТ	НЗ >н[Ь=*Ю=·нRDM! ;Н                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Does it have a long neck\Y55\N54\\Afrog\Atoad\QDoes it have antlers\Y59\N58\\Agiraffe\Abeaver\Aotter\QDoes it like cheese\Y61\N60\\Adeer\QDoes it like mud\Y63\N62\\QCan it talk\Y65\N64\\Arabbit\Ahippopotamus\Amouse\Aman\Abee\Agnat                                                                                                                                                                                                                                                                         µэ! <КЕеНТ	бНХ
М’	Бy·К™ЖOХЕл*Ю=е	е$ЇнrбТ	"Ю=ге#·нRDMбС(нёБС#q#s#r# <лн°НЗ	Г™ЂAND”ABS•ACS–ADVAL—ASCASN™ATNЖAUTOљBGET ХBPUT ыCOLOURыCOLORЦCALLЧCHAINЅCHR$ШCLEAR ЩCLOSE ЪCLG ЫCLS ›COSњCOUNT ЬDATAќDEGЭDEFЗDELETEЃDIVЮDIMЯDRAWбENDPROC аEND вENVELOPE‹ELSE EVALћERL …ERRORЕEOF ‚EORџERR ЎEXPўEXT гFORЈFALSE ¤FNеGOTOѕGET$ҐGETдGOSUBжGCOL“HIMEM иINPUTзIFїINKEY$¦INKEYЁINT§INSTR(ЙLIST†LINEИLOAD’LOMEM кLOCALАLEFT$(©LENйLET«LOGЄLNБMID$(лMODEѓMODмMOVEнNEXTКNEW ¬NOTЛOLD оON‡OFF„ORЋOPENIN®OPENOUT­OPENUPяOSCLIсPRINTђPУ2Гн{д=!8·(
GЇѕ# ьъеб"о=н{д=2э=Но
"т=·(*м=|µеэбВ!  "к="и=Нѕ7Н—
НIН Ь3Н—
Г™!Wэ~ F#ѕ(Ш#Л~(ырэе#Л~ э#э~ ю.(ѕ(пН\8эбЭ~· шэ+сЇxЙХее N	ел*Ю=нRDMбСн°нSЮ=бСЙн[Ь=! я9нRDM! ;Нw3Фо	> Т	НТ	+6я+6я$*Ь= >N(		+ѕ#(хГ­###"Ю=Й*Ь=6 Нз	е*Ю="а="в=!l=Еp6 #ыБбЙелЕН/Бб~юнМz
юэМz
Щ> ЭЛ FДћ
x‡ЭЛ NДTy‡ЭЛ VДTЩ~югМz
юхМz
 ~#ю(Fю" Нn
реэбЕНP%БЩЕН+БЩэебЙЛC ,юЌ(еН·
~Щюг(юн т€
юх(юэ т•
ЩЙ>Нћ
>
НR9Ц(Ш:ы=<2ы=Ие*ь=ЅбАаюЉкћ
Ее!WЯн±~#юЉхмћ
скЖ
бБЙл*Ь=Їѕ<РЇGNе#~#foнRбР	ГЯ
 н[ф=*Ь=·нR0N68\QDoes it fly\N2\Y3\\QDoes it live in water\N9\Y8\\QIs it an insect\Y5\N4\\QIs it a mammal\Y7\N6\\QDoes it have black stripes\Y37\N36\\QIs it yellow\Y19\N18\\Abat\QIs it a mammal\Y15\N14\\QIs it an insect\Y11\N10\\QIs it a mammal\N13\Y12\\Aant\QDoes it have a long trunk\Y21\N20\\QDoes it have a pouch\Y27\N26\\QIs it a fish\N17\Y16\\QIs it very big\N23\Y22\\Agoldfish\QDoes it have a hard shell\Y29\N28\\QDoes it have a red breast\Y25\N24\\Acanary\QDoes it purr\Y33\N32\\Aelephant\Awhale                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                AGE ЏPTR ЇPI рPLOT°POINT(тPROC±POS ОPUTшRETURN хREPEATцREPORT уREADфREMщRUN ІRADчRESTOREВRIGHT$(іRND МRENUMBER€STEPНSAVEґSGNµSIN¶SQR‰SPCГSTR$ДSTRING$(ФSOUNDъSTOP ·TANЊTHENёTOЉTAB(ьTRACE‘TIME №TRUE эUNTILєUSRпVDU»VALјVPOS юWIDTHУHIMEMТLOMEMРPAGEПPTRСTIMEMissing No such Bad  rangevariableOut ofNo  spaceяяroom    Mistake , Type mismatch ¤  " Ю Ю Not к т Array Subscript Syntax error Escape Division by zero String too long Too big -ve root Log Accuracy lost Exp   ) HEX ¤/т call Arguments(	нR8хнB#^#Vл"ж=Й!  ч*ж=|µИНU at line    'ЇнR<0ы=(ЛбЛй±Дћ
xю()T]))иЮ7ЙН§э~ ю( h>Г	э~ ю$(bю!(bю?(bНАэ~ ю( AХ~·(Ь#  хэ#хНZ&еХНѕ ЩСгN#F#глХННСл·нB>0µбс= ЫНf&сеНАбWэ~ ю?(ю!(еЭбzїЙ>Ђ>Ї!  х еЭбzюЃИЕНw!Нe#Щеэ#НХ ЩСсеЭбїЙэ~Н\Шэ~ !Ш=ю¤(C!Ъ=ют(<7ЙЦ@Ш& ю0‡oэ~ю%  э~ю(() =э#э#ЇЙюШю;?=ШЦ‡ol=--7ш^#Vzі(Ebk##эе~#э#эѕ (ч·(эблГYэ+э~ ю((э#НP8ю((жэ~яН\0ЮСэ~яю$ЃИю%ИїЙ<ЙЇн[в=r+sлw#w#э#НP8w#Н\0тю((	э~ю((зэ#6 #еН•>є(=6 #= ъ"в=НйбЇЙНў&!  э~ Ц0Шю
Рэ#T])8Щ}ЩН4Щ|ЩН4}Н4|Н4БyН4СKС! ;(	~#ЕН4Бф>Н4ё" ! =Їѕ(:ы=·(
–(0ынDНT: =O Нм(8ЛЂэ#ю~(Ню;(Ню,(ОН(жэ+ЕН®ъ‘СХЛJхМА%сД}%БЕy“ФTБНbГЛ@М—
Гэ#!  "м=Нў&ю‡э#Кэ+э"м=Г‹ю…(бНѕ э~ э#,юе(юд(т»>' AWЩеЩБxґµ '±($(Нм(э#» ц у{ют("ХНХ Сzюе(&Нш2э~ э#ю‹Кґю т>(Г	>оГJНХ НмВйЩНХ
еэбК>)бНХ эеНйН#С!B·нRэбК>&ЖэеНйНБЕ!Z·нB>+ ІНѕ НI%БС ХЕХэбГ>"њНt чхэ~ юё>$ Ќэ#ЭеН· ЭбсGЕе!  LЩе! Щэ~ ю€ 	э#ЭеН· ЭбЕеЩеЩэеЭеНйНБ!Б·нB>  wНмбеЕеДiСл·нR TХЭ! Э9Нп!Э~ЭбНw!Лzх>НЖ&8JсхН€Э!<Нў&ю, э#Нў&ЕХНвСБлs#rлвx2 <бН.ГНХ Щеэг$!]еЭ! =М«3ЭNЕсЭ~ЭFЭNЭVЭ^Эf Эn0Э! <эйэбЇOЙНѕ ЩеНZ&Нѕ ЩБнiГНiШДZ·шхН еН· ЭбсЛG(їЭqЩЭu ЭtЩЭuЭtЙхДe#сю(жїЩЭu ЩЙ! ;0?еНѓ!{Щo|Щ»0ЩeЩе O	нKв=нBб7(`iНђ KлбИн°РнSв=е*в=$нrбШЇГ	KЭеСЇG№(н°>Й>яхэ#ХНў&Нi88ДZСе·хХэгъ3Н· эгСсЩеЩеGЕНйНЗ эгЩСЩсН	&ЩНў&ю, 
ю,(ј>Г	Нf&ю) уЩБx<ЩИЩ=ъpбЩбЩЭбН€лН(&ЭбН±бСэ#Нў&ХЩЕХеЩНвЩбСБЩС·ъЎЩеЩGНw!ЩгЩеЕ&хХЩеЩН"ЩбЩKСНйс!  EнB9щGЕ(	Х ;лEн°СЭеНМНйНў&ю,(Ґлйэ~ ю Ию,Ию)Ию;Ию\ИНў&ю‹Рю:РюЙНмИэ#ш>НШxжЦШНИю?Ш±OЙ!Нi 7ИюЭ(ю…?Ш~·(рэ® ж_(	Л~#(ы#мэеЛ~э## ѕМh~э® ж_(нэбЮНШДu фxFбЙ#НШАНдИэ#фю+Ию-ЙNOР RLCБEX AF AF§RRCБRLБRRБDAБ'CPМ/SCЖ7CCЖ?HALФvEXШЩEX DE HМлDЙуEЙыNEЗDIM °FRETОERETЙMIM ±VIM І^RRДgRLДoLDЙ CPЙЎINЙўOUTЙЈLDДЁCPД©INДЄOUTД«LDIТ°CPIТ±INIТІOTIТіLDDТёCPDТ№INDТєOTDТ»BIФ@REУЂSEФАRLГ RRГRМRТSLБ SRБ(SRМ8POРБPUSИЕEX (SРгSUВђANД XOТЁOТ°CРёЂ „°ADДЂADГ€SBГINГDEГIО@OUФAJТ DJNЪJРВCALМДRSФЗREФАLД@]Н ]В OPФ ]Ч  В ГДЕИМ(HМБ(IШ†(IЩЖBГDЕ
HМIШЊIЩМAЖSРNЪЪNГPПPЕР)88	)8_ 0б>Г	Нл|µ .
Нмэ#е!
 ДлгБx±АН	Silly НлеНм(	юз(э#НлгНХ
БЙэ~ ю$Ию%Ию(Ию0Шю:?Рю@ИюAШю[?Рю_Шю{?ЙЇН	† э#{юь0рэ~ юИН\0Л©Л™ю (дю,(аюG8Л™ю" Л?ЛЛa(ЛЎЕХНлСБ|µД#Б(	 ··фY	ю*(·фY	юЏ8ю”0Ж@юф(юЬ Лсю¤(	ют(Нf8Лйю& ЛЩ!Е н±Б Лб!Е н±Б ЛБГ{едчьЊ‹х…:Лбл6Ќ#zжАG{жА°оTw#{ж?ц@w#zж?ц@w#лЙ*о=~#·ИН·
чгНLгЙЎ;Щj»Аизb-<]pА2дчФтЫА2П‹‹8А2:'А2|7 А2ўІ«ЩА2А2БєєА2еJQ‹RмъBПЩА2 Z•wНм(НЗ >н{д=Н­	н{д=Э!ц=н_ <ЭwџЭwНц	!  "м= Э9Нп!сМA%>НЖ&81$ ! 9щНў&ю,Вэ#›БСэбэеХЕГ! 9щБ!БнBбеЕ(>!Г	хНNхНNНйэ+эеНБ(9>8дЕ*Ь=>ЭНЄ8!еэбэ#Нў&НэеС8	Д§эеСs#rл>Gн±ШэбН> Ї^#V! 9Нў&ХэгСю( Нў&ю(ВйэеБЩНzНf&ЩЕэбеНбs#~rюоВХэгНшэгСr+sГБЕ!J·нB(!N·нB(!М·нB>В	эеБЩэ+НzЩЕэбНiВй·Ни%хф€сYьґНў&ю,Вэ#Нў&ЬБ!М·нB(!N·нBэбК>Г	ЭбБx·ъQбЩбЩН€Ц!  9YНґщЛНлНў&ю,Вэ#Нў&ХНвСхе·ъ™Н$4ЩoЩН$4ЩgЩН$4oН$4gН$4OЭбсХН€СЖ! ;Н$4ю(w, хЭбсХлН±С­ю#(¦ ю† э#Ђ! <6НмКэ#ю,(Qю;(Mею" 
ЕН№!БНbН бЛБТэ+ЕНвБбх~#юМ&ЛyНў&э#ю=И>Г	юЉ(ю‰(8ю'АН—
ЇЙЕНѕ ЩБэ~ ю,(Нf&}!ы=ѕИхЬ—
с–э#ЕеНѕ ЩСБНf&НЇЙЕНХ Щ}Б·ИЕG> Нћ
щБЇЙ! ;И~#Нћ
чхЕеэгНЊНў&эгбБсЙ ;~юИ#чНў&ю"э#К№!э+ ;э~ ю,ИюИэ#с N(###ѕИ	Г¬+7Йюbk)Ш)ШлАлЙл!  >)ШЛ#Л0	Ш= уЙНў&ю#>-В	э#НХ ЩлЙНiэ#ю:(чю]ИюИэ+Э*@=!ю=Лv(Э*<=ЭеэеН§БСШНi7Аэ+э#э~ Нт ц:ю=Эеб·нRле*@=е"@=Лw(*<="<=бЭбЛg( |Н“}НЊЇ»(:ы=ю>Ф.Э~ НЊЭ# л>Н.эебнB
Н·
- шН—
ГуН“> хНњсжЖђ'О@'Г·
ю. э#ЭеНвхНи%Щ*@=ЩсН€ЭбНiИюЦДэ#Кёэ+!{Н ШH Ц'0юиФ†hЦ
0ющЬШНеШНЉUЦ0НШН(Г  I БGR БOA ЙWA Т_(BC Б(DE БA (BГ
A (DЕ P%©"Ж"{"О"q"v"#V#А2^"N#R#:":#™""#Џ"”"z#B#ѕ"и%FH"C"$.#k"F#J##¦"¤"#А2#"&#§#*#>#2#6#Ђ"#*m#)"‘$$ћ$Я$®$ъ$Ё%%."щ"#у"ж"#м"НГю‚(ю„АНs&НГНЃ&оНФюЂАНs&НФНЃ&тН3 НN&АGэ#Нў&НN& э#ёКйЂGxъ Цю: ЖНu&Н3 НЃ&Й=жН	&хН3 тг сKС!  9CХ ;лН­&Сл& 9щлЇOэ~ ЙН‚ ю-(ю+АъM Нs&Н‚ НЃ&йэ#Н	&Н‚ тг KСХ! ;Ty·(Eoѓ_>Ъ	Х-нёСЩБН(&ЩцЂэ~ ґНџ ю*(ю/(юѓ(юЃАНs&Нџ НЃ&жН:!·Нў&ю^АНs&Н:!·НЃ&нН®р%Н®тe#Н®шН:!·рН:!·тe#Н:!·ш>Г	Н®Нf&ЙНи%Н;&8э#жЩ)*Ь=>ЬНЄ"р=э*Ь=НJэ"ф=НЩ8Нў&э#ю:(чю(йЦЖ8o‡O ![	~#foНў&йНо
|µК™ Н3Гэ~  э	·(е*и=|µИэVяэ^юнRШл>[Нћ
Н+>]Нћ
> Гћ
НЗ >! ;Нa6ЌэебНa6эеб>Gн±еэбГюЕ(оюd(дюw(Lю•(э+НtК86хН еНЗ ЭбсН±ГНJэ"ф=НЩ8Ну8ю(н!ю=~жц0wЯНiИТZ>!>Г	Н®CлЩлБ!М·нB(!J·нB> гэбэ"ф=лЩл ;XЙЭбБx·ъ+бЩбЩН€Н!  9ХYНґСщАНi8{КАН§еЭбэ~ ю(z rех Bэ#ЕХЭеНѕ Л| WЩ#ЭбЭ#Эu Э#Эt БНН8FлБэ~ ю,(ХНf&сЭ#ЭгЭp НАб8+8(е$($нr0 б"в=zі(+6 цНў&ю,Вэ#Нў&Ђ>
!>Г	·(хъёGэ~яю)x(й*в=Щ!  LН€Нѕ Щ#л*в=«ю# kНлНў&ю,Вэ#ХН®ъСЕхДЂсМoсЕе·ъхЭеНp#ЭбсН€Н±бБЛЃџЛA 
>?Нћ
> Нћ
! <ЕеЭеН­9ЭббБGЇ2ы=ёИ~юИ#щЙю#К\*р=~#юМ–еНвб·ъ|еэгхЭеН· ЭбсН€эгНoеН±б"р=Нў&ю,Вэ#Нў&Г>ЬНЄ#Р>*Г	Нѕ НI%(э~ юЊВэ#Нў&юЌВГ э~ юэ#Кю‹ теНЇ2ы=ГНU
ъ Но
НН—
Г™НIГНц	*Ь=*Ь=Нм(НХ ЩНХ
>) ’>ЬНЄ"р=ГНбН {хНѕ еЩСсНt4ГН Нѕ Щ. "Ь=Гю$(Н Нѕ еЩСНГэ#Н НЗ НА2ГН Нѕ Нц	Щ"а="в=ГН Нѕ Щн[в=ЇнRЪ	н[д="д=лнrВлщГНѕ Щ}2ь=Гэ#!  юо(
ю‡(э+Нѕ Щ+"и=ГНѕ Щ}НR9э~ ю,(ю; |НR9э#Нм вГНбН3ГНбХНZ&Нѕ Щ}СН4ГНѕ Ще  KЦ
02юэФxю Неy0(оFНЊНИxж?ю7АyюЂ	(НоOН†ДЦ0НлyТЊоdOНШyЦ0!юяМ{НлШЬ{$(иxю7АyоНё%Ц0$юяДсy0>НёНИн[@=7нR}џј>В	}2G Нсy0xж?ю>й( >ГНёНУНИНљ|НИЎґ И}±x
Нсy0pц	llН0_НлНiю((ТНШ>ёGМxж?юy ©>щ=ЕФеyБ0w
ННb0’НИННbШНёЋК…НИ!ю=OнoyнgЙюЬ†xmгЭеНЗ Эб! ;Ї»И~#Нёхx8xж?юyИН†yцCЙю7Аyц0ЙЕНЛhБ(D&я>н.>Люv7ИНёр{ е!ВН бШЛxИЛXеМї]б>ЭЛp(>э·WшЭw Э#·Йэ~ ю)!  ИНiЕХЭеНѕ ЭбЩСБ}·ЙНШxж?ю?ЙНЪШ/НЪШ&НШxжЦ0юс7АЩнjщЩµoЩН;&0кЇЙ>Г	НО (|оЂgЇЙЩ|/g}/oЩ|/g}/oЩ#|µЩ> А#ЙНйНў&э#ю&(Єю-(Лю+(Ђю((–ю"(cюЖТйюЌТі&э+ю:0ю00tю.(pНi +·ъ"·( ЛG(ЭNЩЭn ЭfЩЭnЭfЙ!  Щ& Эn ЩLЙЪй:ю=Лo> #э#НP0щЭ!@=ЇOК ;э~ э#ю"(ю с>	Г	э~ ю"э#(мэ+>ЂЙэеЭб>$НЖ&8дЭеэбЇЙЭFЩЭ^ ЭVЩЭ^ЭVЙ ;0Нѓ!Щ}Щ·O>ЂИ н°Й~#ю>ЂИ хЙН	лuН	pНбН>4К#Ги%НбН$4oYНћ$Нў&ю( 
НХ ЩDMнhCН$НЮ Ї»К#* ;1НЮ л+*а=(*д=#*Ь=э~ э#юPВй*Ю=*т=
*э=*ы=& ЩЇOgoЙЇ!>!>хНЮ >сЖя! ;Нё3oЮНбНE4НбН^4
э~ ю$(	НХЩбЇOЙэ#НА2>ЂЙНе%РНе%ИШНе%ШНе%(Р'†'Є''**ы)д)*Ў(ъ'п)д'?)Y(-*‰-е,
-#+W*И+ќ*S,У,8*_*u*.+і*+г0§+"*K*…*‘-ё/t0№0К0q'Ф'ѓ'§'•'**ц)Я)*п((к)о'µ)\(НЇ/|ўg}ЈoЩ|ўg}ЈoЩЙНЇ/|Єg}«oЩ|Єg}«oЩЙНЇ/|Іg}іoЩ|Іg}іoЩЙНЇ/|ЄЛ|Л|ДЗ/Нћ0Л|ДЗ/DM!  ЩDM!  >ЯНу1Щ ИГЗ/НЇ/НЄ'·Нћ0 рГЗ/Н&1аН 1Нk0zоЂW|оЂg
Н 1аН&1Нk0ИКћ0Щ  Щ|Єхx№Ьћ0xЛьДџ/сzЛъъ0(Н 1Ь¦0Ль
Н&1ЬЫ/НH0/Щл! Ђ·нBлЩМ0ЬЉ0ЬІ0ЛјКг0·рЛьЙНk0>КЧ&И|ЄЛъЛьЕBK  ЩBK  >аНу1ЩЛzЩМ2лЩЛ8Л·нB?лМ0ЬЉ0БЬІ0y?Г()|ЄЛ|ДЗ/Нћ0Л|ДЗ/DM!  ЩDM!  >ЯН!2ЩїНГ0 Лz 	Нћ0JрГЗ/ЩЛ#ЛЩЛЛЩнjЩнjтЦ(шЛјЙКг0И|ЄЛъЛьЕDХ(pСНB,Нt0еЛјTЩРМЩ~Нт0 8‚ЩљyЩЃНт08Н?,Г=-Нr1ЕН]1НW1Нђ15уШ7{‘k№Є|ЮA—a|{ќ7’}Z*МL}\©ЄЄ~    ЂНf1Нf1Нп(сНЅ+хЬ(сЬф'с·рЛьЇЙНе,>хгНt0 Л|(Лј>-Ї№(GХxхyюЎ0ю›0%/юб8>шЖН·1хНп(сGсђаЦ Н·1хН\(сGсЂС>	Н·1Нт0yБOЛьЬ1СЛ№> xЭЛN ЇЭѕ(
>цЭ†·ъ.ЇхН=1Џю
8Ц
Щ,Щ рO|ж?gст).< >№> хyО0ю0(ю:?0гЛuг >0<=хНГ0 >  »сх> 8µляЭ^ЭЛF 2ЭЛN(x·(ъm.PzЭ†_ю8x·ъ‘.(Э~· >
ё8PXxЖЃOЛъz№0с(т¦.хъµ.>0в­.6.#w#т”.гсM '6E#x=тЗ.6-#нD60(ю
G>:8#604ѕ 60+4#х#лЙЭFЩЭ^ ЭVЩЭ^ЭVЙНг0 Нz/ю.НТ4<А>ИН	Close error {· Л[АХН.3Сх!ы:Л†ЛЋНy5ИЇw+w!% Л~#Дю4!¦ нKв=нB ІнSв=¬7Нё3·((_:ы:Л 
Н$4НR90с«Н3Ге8Н#7еЕНЉ5лН"5 >ЦН	File not found НН4 
Н5	гнBг0сБхНю2с?ЙхНЉ5сФ,5Ь"5ЙН¬3И!ъ:~+¶(+ш>АН	Too many open files н[в=s#rx!¦ "в=!\ Х$ н°л#q#СGН­4xГйХеGНd5x +p#NЛ№Лю4#е	wбМЄ4бСЙХеНd5NЛ№4#е 	FбмЕ4МЄ4xбСЙНd5+~<ЙНd5л\ $ Хн°лгл>#НТ4бЇНd5~‡++V+^+foЛ:ЛЛЛЙU)ЛCL_ХНd5сжЛ~(цЂwХе+++V+^л·нBбСИ#·ью4е+++6 +p+qбНю4НН4+Лѕ+wИ6я##ЕЇЂw#ьБ7ЙН5Н­4<ЙН\5>!Нй4 ·Й>яН	CP/M Error ЕХеЭеэеOН $%эбЭббСБЙН\
Не%ИНе%А>яЩgoЩgo<OЙ>#C>:>6>2>.>*>&>">>>>>>
>>>хНО сНЖ&Ъ	ЇЙ>&ф>'рНЮ ЇЭ! ;>$гНЮ >эе ;э! ; НЇН	&э! э9Н®эбэ9эщэбЙЭ!ц=Нў&ю((НЂ!Л ЩнjЩнjЛ](?уЛНЌЇOЙНХ Э!ц=Л|7 мНI%хНA%ЩНЂ!Дµ#ЩЛ| Щ)Щнj фЛјсИЩ{=ІЩіІИ >
НЖ&Ъ	Нe#Г0!НW&Н	&НЗ Б!  9ЕCНў&ю,>  э#ЕеН	&Нѕ БН(&бБЩ}Щ·(= ;Н]$С(нb9нrл& 9щлНf&Гћ"Е O	Б‘0(нDOЕ н±yБ Oё8ЕХе(ѕ #шбСБ ЭЇЙцяЙНХ Щ}Н	97НХ ЩН19 ;>ЂРЙНW&Н	&Нѕ БН(&Щ}Щ·(=o“ 0нDOН%Нў&ю,э#(э+Нf&>ЂЙНW&Н	&Нѕ БН(&Нf&Щ}Щ»0k_>ЂЙНЯ$РM!  ЩDM!  >аН!2Ь52Ще! Ђ·нRбМ0ЬЉ0БЬІ0y€8тг0ъґ0ЖЂOКг0ЛјрЛьЙНћ0Л|хДЗ/H Н=18щсЩ,ЩLЙсЕлеЩлеЩЭ!  Э9(BЕЩХЩХНt0Н?,ЭqЩЭu ЭtЩЭuЭtЕЩЛ#ЛХЩЛЛХ>
хНO1НЭ&сНг.ЬЭ&СЩСЩyБOЪсссЙссс“ЛzхНћ0Н]1(о>ћ№8<Нџ/т°)Нћ0НV,Нf1сНп(ГЛ+Нн0На0Р8Нн0На0ИШ,Нн0На0Ш!Нн0На0(РНн0На0И	Нн0На0А!яяЩ!яяЩЇOЙЛ|ИКЗ/ЛјЙНё/|/g}/oЩ|/g}/oЩЇЙ!IЩ!ўЪЩЃЇЙНg*Нп(ЇЙНg*Н\(ЇЙНt0.eЩУаЩ…ЙНГ0±ИЛ|В"*Нг0ГЉ0Н®2хНх.сю-> АКЗ/|оЂgЇЙИ>џDНџ/ ьЉ0x·ьЗ/ЇOЙНt0Л|>ВЧ&ИЛьЛAМ¦0yЦЂЛ/ЖЂOЕл!  DMЩл!  DM>бНT2ЩЛxЩМT2НЌ2·Н2Л`iЩ`iЬЉ0БЬІ0џ Мx/юE> МI/Л| · ё №ИђЃџНZ0Лј·Иъ-/Н·1Нп(ЇЙюЪ8
нDН·1Н\(ЇЙх>&Н·1Н\(сЖ&дЕGЭ#Н®2Н¤28x‡‡Ђ‡GЭ~ Э#жЂGтS/dдю-xБАнDЙЭ#Н¤2ШЭ#Н.18 жЩ O	Щ0ж#|µ бНЎ0ЫЇЛьН¦0№ИТ¤/Гґ0Нћ0Нё/Нћ0ИЛ|х>џНџ/с И·ЩХл!  нRСЩХл!  нRСЙЩ/е·!  нBDMба>–№>ЪЧ&НЅ+Щi!ЩЛъЛьy Э!  Эеё8:ЩгнBгнRЩнR0	Щг	гнZЩнZ?Л0Лщ=ё8г)гЩнjЩнj0Х·ЩгнBгнRЩнR·Ь<YOЩБЩЛ|АЩЛ!ЛнjЩнjВH0ЙЛ|АЩ)ЩнjВZ0ЙЖ*Нћ0Нt0Нћ0АНГ0И|·ьЗ/џНZ0·шЛјЙЩ 	ЩРЕ 	БЙ·ЩЛЕЩЙyHGлЩлЩЙНD1ЩЛЛ°ЩА>ГЧ&НГ0И|жЂц@Й|µЩґµЩЙx± 
На0> И>ЂЙНk0Нн0сН1> ЩgoЩgoOЙНя0сyёАнRАЩнRЩЙ|5>(НТ4(>ЖН	Disk full е!! 4#(ьбЙ\ >НТ4<ЙН>5\ >НТ4>НТ4<ЙЕ\ ю?(шБЙ>МН	Bad name >лНй4лЙНy5!% А>ЮН	Channel {ж‡_ !л:^#VzіЙ> Хеe !56 н°!| q#ьбOЇСН.6ю" '#Н.6НХ5ю"#(t>эН	Bad string ~#ю`Рю?Шо@ЙХ#~ю:+x ~ж##\ ~ю.("ю (ю(ю=(ю"(?ю*( #ю| НК5yНщ7С~#ю*(ъю. e (Б+СЂ ~ю А#щBBC  Н.6~Нщ7ю08ию:8
юA8аюG0ЬЦжл))))лі_#ЭН.6юИю|Ию.КA7л!8Нщ7ѕ(8uЛ~#(ы##оХ#Нщ7ю.(
®(уюЂ(СвсЛ~#(ы~#foелГ.6НЉ53/НЉ5:\ =ъс6_#НЉ5ю= &#еН7!\ l  н°бНЉ5Н>5\ ~ю yНТ4р>юН	Bad commanИK}“o bXн°>ЂЙНѕ НZ&Щ}ЩхНЗ Нf&с·(Ф=O>ЂИИCb. Е~#>К	хБ р>ЂЙyHGлЩлЩЙ|µЩґµЩЙЩэ~ э#gжАэ® э#o|жАэ® э#gЩЇOgoЙэ#НО Н}%>ЂЙНe#  ;ЕЇЩ)ЩнjшБш(· ё(йЖђ'О@'GЮНў&ю~(ГНО Э! =Э~·Э!в%(Э! = ;>%НЖ&Ъ	ЭЛF>ЂИyЖ»(чл6 #лц	 Нт%> ЩgoЩgoOЙ(
(ѕА#у·И7Й·ЙНйЭб·! ;TEнR9щWХ(
K ;лн°НйЭйЭб!  D9 ;(н°щЭйэ~ ю0Шю:?РюAШЦ7ю?Йю>Рю=Рю<ЙНЗ Нў&э#ю,И>
Нў&э#ю)И>Г	э#ъг гЩеЩхЕйъг ЩБЩyБGсЩлбЩлбЩЕЩжНЖ&8ФЇэ~ Йэ~ ю Аэ#Гў&е!ўеЦЌ!0Е‡O 	~#foБгЙэеэ!  э9НЭ&їэбЙ>эщ·7хю*0фю0x±Дg0е!э&Е‡O 	~#foБгЙt'ЧЃOЛјЇЙНt0Н]1Н&+Нf1Н]1Нћ0Н1+Нf1Н\(ЇЙНt0Нй/{Нt0еНй/сж«хЛјНЅ+Ьф'схжв{+Н]1НW1Нђ1·Ё6m&ЮРsАЂ€yќЄЄЄ}    ЂНf1Нf1Нп(Гќ+НW1Нђ1qХxLpЇ”¶vИњЄ*{Эяяя~    ЂНf1сжИИЛьЙ!  Щ!  ЩЂЙ  Щ  ЩЂЙIЩўЪЩЙНt0НH,ЩПСЩеНщ/сЛ{(	Ъг0>ГЧ&жЂіхЛјН]1Нђ1r@.”seoO.v7m€yе *{OЄЄ}Vэя~юяяя    ЂНf1схф?,ст*,жнDЖЂЃ8тг0ъґ0ЖЂКг0OЇЙНІ+Нћ0Г\(r1ЩшЩЙНt0>Л|ВЧ&КЧ&5Щ3уЩНх0yЂ8<хНr1Н]1НW1Нђ1HМыt}Ї®я~ЊЩНL~г©Є*    ЃНf1Нf1Нп(сН]1Нг0ЦЂ(0/<g‡хНZ0ЛјНH,Нп(с0ъЛ,ЛьНf1Н(ЇЙНS,[^Щ©ШЩ~Нп(ЇЙНt0Н]1НO1Нп(НІ+Нф'Н¶*Нf1>Є|ш0мНт0И?Й|Єтх0|ЙНP1НC1НC1ЩЩнZЙЩ·нRЩнRЙНP1Н=1ШН=1ШН 1ШЩ)ЩнjЙЛ<ЛЩЛЛЩЙAT]ЩT]ЩЙНO1Нп(ЭбЕеЩеЩЭйЭбЩСЩСyБAOЭйН]1НІ+Н(Нf1Н]1Нћ0НІ+Но'Нf1Г\(Э! Э9ЭгНг.Нп( ЭНг.Эгъ(Н(Нг.Эгд<еЩеЩНІ+Нћ0Ї=( тП1№8<<ЛьН10НC1ЬЉ0ъД1Гґ0Нћ0ЛєЩбЩбЙ·нBЩнBЩ0	ЩнJЩ?ЛЛЩЛЛЩ<рнjЩнjЩ0Ю·нBЩнBЩ7Г2·ЩЛЛЩЛЛ0	ЩнJЩ<рЩЛЛЩЛЛГ"2нBЩнBЩ0	ЩнJЩ<рЛ!ЛЩЛЛЩЛ#ЛЩЛЛЩнjЩнjЩЛ#ЛЩЛЛЩнjЩнjЩТB2·нBЩнBЩГR2)ЩнjЩ8о<нBЩнBЩР	ЩнJЩЙЭ~ ю:?Шю0ЙЭ~ Э#ю (чю+Ию-ИЭ+ЙЇН	Sorry Н#7Ъс6еЕНЉ5лН,5 >ѕН	Directory full Ню4	гнBг(0фБ>d !Ђ Н\5\ >НТ4<И>ДН	File exists НЉ5Н86ю+хХ #Н86ю єлСсИ·нRА°#>?НЊ5ю ¦На8\ !Ђ Н\5yНТ4ъ—
ж`_ !Ѓ е ^#Л~б УЕ:\ =ьм6ЖAНR9> Л{(>*Нx8> Н8БН—
¦Е> НR9щБ›Н86{ж2я:ЙЇщ>>хеН%3бБ~юИ:ы:°2ы:Н¬3ИЭб*д=·нr9 Zя	"д="л:щлНс3Эйжю`Шж_Й~Нщ7юO #Н86{·!ы:Л¶ИЛцЙBYЕCPНDIТB7DRIVЕµ6ERASЕЄ6ERБЄ6ESГ8EXEГБ7LOAДq3OPФґ7RENAMЕД6REОД6RESEФ±6SAVЕК2SPOOМД7TYPЕR3ях>:НR9сНR9~ж#НR9чЙНUBad sum Г-юН к8! Ї_†S_zО нЎк©8і Х!л:w#ь ;!Ђ N#№(н°л6н[ _! >Й!к:5Мн8:ы:·р!ы:ЛѕГм6Х>яНй4С·Ию(ю                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ndependent as possible and, as  supplied, 
   it  will  run  on any CP/M 2.2 (or later) system using  a  Z80  processor 
   (checks  are carried out to ensure that the processor is a Z80  and  that 
   the version of CP/M is at least 2.2).  It is minimally configured for  an 
   ADM3a-compatible VDU.

   Few  CP/M  systems  offer  colour graphics of  the  quality  provided  as 
   standard  on  the BBC Microcomputer, and no software can  provide  colour 
   high-resolution graphics from a monochromee  for BASIC programs, variables (heap) and stack.  Depending  on 
   the system configuration, HIMEM can have a value up to &FE00.


3. COMMANDS, STATEMENTS AND FUNCTIONS

   The syntax of BASIC commands,  statements and functions is in most  cases 
   identical  to  that  of  the  BBC  Micro  version  (BASIC  4).   The  few 
   differences are documented here:

   ADVAL
   This function is not implemented.

   CALL
   CALL  sets  up a table in RAM containing details of the  parameters;  the (D2ь:ЙЭFф:ы:8
енbН19бШрЕХе!ы:Л†Н$4ЛЖхЬ%3сбСБЙе!ь:~6 б·7АХНСРю7Ае!ы:Лv ЛюбЙхХе_Нп8Н`9бСсЙ:ы:Л_({ю Ш*э:s,И"э:Й>:я:Жю ѓ>8>Нй4!ы:ЛV>Дй4ЛNИЛЋ{ЕН4БЛОЙ:ы:о2ы:ЙЭ! :ы:Л_(	Лџ2ы:*э:Ѕ>wДR9. M(  ~#юхе_Дw9бс с> НR9еНw9б+шy(·М9Oм9Х:ы:·yъK:ЭѕхКЏ:ЭѕцКВ: Эѕы(zЭѕч(vЭѕщ(|ЭѕшКВ: юК¤9Эѕъ(^Эѕь(ZЭѕю(`Эѕя(oЭѕэ(~ю 0юА~НR9#Ц чС№Ве8>
НR9н[ф=Їo"э:єА»Аа:ѕ> А#~ю.(тЇGMoд:лн°!ы:ЛЮЙ7,-(J>НR9-Р~ю(>T]ю чСГМ9>ѕИTю{Ѕ ч6 и~ю(Vw,(	НR9>єАwЙ-6>НR9 ЙEDITLIST>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      character-orientated computer.  
   However,  many CP/M system users are interested in the  advanced  program 
   structures  available from BBC BASIC and, within the limitations  of  the 
   host  computer, BBC BASIC (Z80) provides the programming  structures  and 
   the non-graphic commands and functions specified for BBC BASIC.

   In order to make full use of the facilities available in BBC BASIC  (Z80) 
   it is necessary to install a small patch to adapt it to the  capabilities 
   of  the  
   processor's  IX register is set to the address of this  parameter  table.  
   The other processor registers are initialised as follows:

               A is initialised to the least significant byte of A%
               B is initialised to the least significant byte of B%
               C is initialised to the least significant byte of C%
               D is initialised to the least significant byte of D%
               E is initialised to the least significant byte of E%
               F is i                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              BBC BASIC (Z80)

                         Generic CP/M Version 3.00

                    (C) Copyright R.T.Russell 1982-1999

1. INTRODUCTION

   BBC  BASIC (Z80) has been designed to be as compatible as  possible  with 
   Version 4 of the 6502 BBC BASIC resident in the BBC Micro Master  series.  
   The language syntax is not always identical to that of the 6502  version, 
   but in most cases the Z80 version is more tolerant.

   BBC  BASIC (Z80) is as machine ihost  computer.  The source code of the  patch  present  in  the 
   distribution version is supplied as BBCDIST.MAC.

   This  documentation  should be read in conjunction with  a  standard  BBC 
   BASIC  manual.  Only those features which differ from the standard  Acorn 
   versions are documented here.


2. MEMORY UTILISATION

   BBC  BASIC (Z80) requires about 16 Kbytes of code space, resulting  in  a 
   value  of  PAGE  of about &3E00.  The remainder of  the  user  memory  is 
   availablnitialised to the least significant byte of F%
               H is initialised to the least significant byte of H%
               L is initialised to the least significant byte of L%

   The parameter types are:

          Code No.       Parameter Type      Example
              0          Byte (8 bits)       ?A%
              4          Word (32 bits)      !A% or A%
              5          Real (40 bits)      A
            128          Fixed string        $A%
            129          Movable stes are stored in binary floating point format  with 
   their least significant byte first; the fifth byte is the exponent.   The 
   mantissa  is  stored as a binary fraction in sign and  magnitude  format.  
   Bit 7 of the most significant byte is the sign bit and, for the  purposes 
   of calculating the magnitude of the number, this bit is assumed to be set 
   to  one.  The exponent is stored as an integer in excess 127  format  (to 
   find the exponent subtract 127 from the value in the fifth osition to the right
     Move the cursor to the start of the line
     Move the cursor to the end of the line
     Insert a space at the current cursor position
     Delete the character at the current cursor position
     Backspace and delete the character to the left of the cursor
     Delete all characters to the left of the cursor
     Delete all characters from the cursor to the end of the line

   The choice of which keys activate these functions is made when BBC  BASIC 
   is configured fomat of data files is different from that used by the BBC Micro, in 
   part  to improve compatibility with standard CP/M files.  Numeric  values 
   are  stored  as five bytes in the format documented under  CALL;  if  the 
   fifth  byte is zero the value is an integer.  Strings are stored  as  the 
   characters  of the string (in the correct order!) followed by a  carriage 
   return (&0D).

   MODE
   This statement is not implemented.

   MOVE
   This statement is not implemented.

   PLOTring      A$

   On  entry  to the subroutine the parameter table contains  the  following 
   values:

          Number of parameters     1 byte (at IX)

          Parameter type           1 byte (at IX+1)
          Parameter address        2 bytes (at IX+2, IX+3, LSB first)

          Parameter type           ) repeated as often as necessary
          Parameter address        )

   Except  in  the case of a movable string (normal  string  variable),  the 
   parameter  address  given is the byte).

   If the exponent byte of a floating point number is zero, the number is an 
   integer stored in integer format in the mantissa bytes.  Thus an  integer 
   can be represented in two different ways in a real variable.  For example 
   the value +5 can be stored as:

            05 00 00 00 00         Integer 5
            00 00 00 20 82         (0.5 + 0.125) * 2^3

   COLOUR (COLOR)
   This statement is not implemented.

   DRAW
   This statement is not implemented.

   EDIT
   A r a particular system.  The distribution version uses ^H, 
   ^I, ^K, ^J, ^A, ^E, DEL (&7F), ^L and ^X.

   To exit EDIT mode and replace the edited line, type RETURN (ENTER).

   To abort the edit and leave the line unchanged, type ESCape.

   ENVELOPE
   This statement is not implemented.

   GET
   This  function  waits for a character to be typed at  the  keyboard,  and 
   returns the ASCII code.

   GET can also be used to read data from a processor I/O port; full  16-bit 
   port addre
   This statement is not implemented.

   POINT
   This function is not implemented.

   PRINT#
   The format of data files is different from that used by the BBC Micro, in 
   part  to improve compatibility with standard CP/M files.  Numeric  values 
   are  stored  as five bytes in the format documented under  CALL;  if  the 
   fifth  byte is zero the value is an integer.  Strings are stored  as  the 
   characters  of the string (in the correct order!) followed by a  carriage 
   return (&0absolute address at which  the  item  is 
   stored.  In the case of movable strings (type 129) it is the address of a 
   4-byte parameter block containing the current length, the maximum  length 
   and the start address of the string (LSB first) in that order.

   Integer  variables  are stored in twos complement form with  their  least 
   significant byte first.

   Fixed  strings are stored as the characters of the string followed  by  a 
   carriage return (&0D).

   Floating point variablcommand to edit or concatenate and edit the specified program  line(s).  
   The specified lines (including their line numbers) are listed as a single 
   line.   By changing only the line number you can use EDIT to duplicate  a 
   line.

     EDIT 230
     EDIT 200,230

   The  following control functions are active both in the EDIT mode and  in 
   the immediate entry mode (i.e. at the BASIC prompt):

     Move the cursor one character position to the left
     Move the cursor one character pssing is available:

          N% = GET(X%) : REM input from port X%

   INKEY
   This function waits for a specified maximum number of centiseconds for  a 
   character to be typed at the keyboard.  If no character is typed in  that 
   time, the value -1 is returned.  In the distribution version the delay is 
   determined by a simple software timing loop, and may be very  inaccurate.  
   The customisation patch allows this to be adjusted to suit the system  in 
   use.

   INPUT#
   The forD).

   PUT
   A  statement to output data to a processor port.  Full 16-bit  addressing 
   is available.

          PUT A%,N% : REM Output N% to port A%

   SOUND
   This statement is not implemented.

   TIME
   This pseudo-variable is not implemented in the distribution version,  but 
   can be supported by means of the customisation patch.  See BBCDIST.MAC.

   USR
   As with CALL, the processor's registers are initialised as follows:

               A is initialised to the least signADD C is  not.  
   However, the brackets around the port number in IN and OUT are  optional.  
   Thus  both OUT (5),A and OUT 5,A are accepted.  The instruction IN  F,(C) 
   is not accepted, but the equivalent code is produced from IN (HL),C

   The pseudo-ops DEFB, DEFW and DEFM are included.  DEFM works like EQUS in 
   the 6502 version.


5. OPERATING SYSTEM INTERFACE

   The   following   resident  Operating  System   ("star")   commands   are 
   implemented.  They may be accessed directCape key; after *ESC OFF  the 
   ESCape  key  simply returns the ASCII code ESC (27).  *ESC ON,  or  *ESC, 
   restores the normal action of the ESCape key.

   *EXEC filespec
   Accept  console  input  from  the  specified file  instead  of  from  the 
   keyboard. If the extension is omitted, .BBC is assumed.

   *LOAD filespec aaaa
   Loads  the specified file into memory at address aaaa. The  load  address 
   must be specified. If the extension is omitted, .BBC is assumed.

   *OPT [n]
  ified file. If the filename 
   is omitted,  any current spool file is closed and spooling is terminated. 
   If the extension is omitted, .BBC is assumed.

   *TYPE filespec
   Type the specified file to the screen. If the extension is omitted,  .BBC 
   is assumed.

   *| comment
   This is a comment line. Anything following the | is ignored.


6. ERROR MESSAGES AND CODES

   Untrappable:

          No room                       RENUMBER space
          Silly                         LINE ificant byte of A%
               B is initialised to the least significant byte of B%
               C is initialised to the least significant byte of C%
               D is initialised to the least significant byte of D%
               E is initialised to the least significant byte of E%
               F is initialised to the least significant byte of F%
               H is initialised to the least significant byte of H%
               L is initialised to the least significant byte of L%

   USR ly (e.g. *BYE) or via the  OSCLI 
   statement (OSCLI "BYE").

   Control characters, lower-case characters, DEL and quotation marks may be 
   incorporated in filenames by using the 'escape' character '|'.   However, 
   there is no equivalent to the BBC Microcomputer's '|!' to set bit 7.

   *BYE
   Returns control to the operating system (CP/M).

   *CPM
   Same as *BYE.

   *. [filespec]
   *DIR [filespec]
   List  the  files which match the (optional) ambiguous  filespec.  If  the 
   f Select  the destination for console output characters.  The value n is in 
   the range 0 to 2, as follows:
               
          0    Send characters to the console output
          1    Send characters to the auxiliary output
          2    Send characters to the printer (list) output

   *REN newfile=oldfile
   *RENAME newfile=oldfile
   Renames  'oldfile'  as 'newfile'.  If the extension is omitted,  .BBC  is 
   assumed.

   *RESET
   Rest the disk system (CP/M function 13).  This comspace
          Sorry                         Bad program

   Trappable - BASIC:

      1   Out of range             24   Exp range
      2                            25   
      3                            26   No such variable
      4   Mistake                  27   Missing )
      5   Missing ,                28   Bad HEX
      6   Type mismatch            29   No such FN/PROC
      7   No FN                    30   Bad call
      8                            31   Arguments
      9   Missinreturns a 32-bit integer result composed of the processor's H, L,  H' 
   and L' registers, with H being the most significant.


4. RESIDENT Z80 ASSEMBLER

   The  in-line  assembler is accessed in exactly the same way as  the  6502 
   assembler  in  the BBC Micro version of BBC BASIC.  That is,  '['  enters 
   assembler mode and ']' exits assembler mode.

   All  standard  Zilog  mnemonics are accepted: ADD, ADC and  SBC  must  be 
   followed by A or HL.  For example, ADD A,C is accepted but ilespec is omitted, all .BBC files are listed:
               *DIR           List all .BBC files on the disk
               *DIR B:*.*     List all files on disk B:
               *.*.*          List all files on the current disk

   *DRIVE d:
   Select drive d as the default drive for subsequent disk operations.

   *ERA filespec
   Erase (delete) the specified disk file or files.  The extension  defaults 
   to .BBC if omitted.

   *ESC [ON|OFF]
   *ESC OFF disables the abort action of the ESmand does not close any 
   files  nor does it perform any other housekeeping function.   You  should 
   use *RESET after you have changed a disk.

   *SAVE filespec aaaa bbbb
   *SAVE filespec aaaa +llll
   This command saves a specified range of memory to disk. The address range 
   is  specified either as start (aaaa) and end+1 (bbbb) or as start  (aaaa) 
   and length (llll). If the extension is omitted, .BBC is assumed.

   *SPOOL [filespec]
   Copy all subsequent console output to the specg "                32   No FOR
     10   Bad DIM                  33   Can't match FOR
     11   DIM space                34   FOR variable
     12   Not LOCAL                35
     13   No PROC                  36   No TO
     14   Array                    37
     15   Subscript                38   No GOSUB
     16   Syntax error             39   ON syntax
     17   Escape                   40   ON range
     18   Division by zero         41   No such line
     19   String too long          42                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   LIMIT)
BYE:	JP	REBOOT		;RETURN TO CP/M
;
;THE CODE WHICH FOLLOWS IS A SKELETON VERSION SUITABLE
;FOR ANY CP/M SYSTEM.  IT HAS BEEN CONFIGURED FOR A BASIC
;ADM3a TERMINAL.
;
;BDOS   - Save the IX and IY and alternate registers
;         before performing a CP/M function call.
;
BDOS:	PUSH	IX
	PUSH	IY
        EXX
        PUSH    BC
        PUSH    DE
        PUSH    HL
        EXX
        EX      AF,AF'
        PUSH    AF
        EX      AF,AF'
	CALL	CPM
        EX      AF,AF'
        Pd wait.
;	  This version uses a simple software timing loop.
;	  Modify to use hardware/interrupt timer if available.
;   	  Inputs: HL = Time to wait (centiseconds)
;  	  Outputs: Carry reset indicates time-out.
;                  If carry set, A = character typed.
; 	  Destroys: A,D,E,H,L,F
;
INKEY:	PUSH	BC
	PUSH	HL
	LD	C,6
	LD	E,0FFH
	CALL	BDOS		;CONSOLE INPUT
	POP	HL
	POP	BC
	OR	A
	SCF
	RET	NZ		;KEY PRESSED
	OR	H
	OR	L
	RET	Z		;TIME-OUT
	PUSH	BC
	LD	A,-1
	LD	BC,1250		;DELAY CONSTA Out of DATA
     20   Too big                  43   No REPEAT
     21   -ve root                 44
     22   Log range                45   Missing #
     23   Accuracy lost

   Trappable - OS:

     190  Directory full           214  File not found
     192  Too many open files      222  Channel
     196  File exists              253  Bad string
     198  Disk full                254  Bad command
     200  Close error              255  CP/M error
     204  Bad name
	TITLE	BBCDIST.Z80 (C) R.T.RUSSELL 1982
;
;BBC BASIC (Z80) - CP/M VERSION 2.30 & 3.00
;(C) COPYRIGHT R.T.RUSSELL, 1982.
;ALL RIGHTS RESERVED.
;
;THIS PROGRAM ALLOWS THE USER TO ADAPT BBC BASIC TO THE
;PARTICULAR CHARACTERISTICS OF HIS SYSTEM HARDWARE ETC.
;
;THE PROGRAM RESIDES AT 100H FOR EASE OF LOADING.
;*** IT MUST NOT EXCEED 256 BYTES IN TOTAL LENGTH ***
;
;PLEASE NOTE THAT A Z80 PROCESSOR AND CP/M VERSION 2.2
;OR LATER ARE REQUIRED.
;
;R.T.RUSSELL, 11-03-1984, 03-05-1989
;ALTERNATE REGOP     AF
        EX      AF,AF'
        EXX
        POP     HL
        POP     DE
        POP     BC
        EXX
	POP	IY
	POP	IX
	RET
;
;INIT	- Perform hardware initialisation (if any).
;
INIT:	LD	A,2
	INC	A
	LD	DE,NOTZ80
	JP	PE,FAIL
	LD	C,12
	CALL	BDOS
	OR	A
	LD	DE,NOTV2
	JP	NZ,COLD
FAIL:	LD	C,9
	CALL	BDOS
	RST	0
;
NOTZ80:	DEFB	'Wrong processor$'
NOTV2:	DEFB	'Wrong CP/M version$'
;
;REBOOT	- Switch off interrupts and return to CP/M
;
REBOOT:	RST	0
;
;GTIME	- Read elapsed-tNT
WAIT:	DEC	BC
	CP	B
	JP	NZ,WAIT		;WAIT FOR APPROX 10ms
	POP	BC
	DEC	HL
	JR	INKEY
;
;PCSR	- Move cursor to specified position.
;   	  Inputs: DE = horizontal position (LHS=0)
;                 HL = vertical position (TOP=0)
; 	  Destroys: A,D,E,H,L,F
;
PCSR:	PUSH	DE		;SAVE X & Y FOR LATER
	PUSH	HL
	LD	C,2		;SEND ESC=
	LD	E,1BH
	CALL	BDOS
	LD	C,2
	LD	E,'='
	CALL	BDOS
	POP	HL		;GET Y BACK
	LD	A,L		;ADD OFFSET
	ADD	A,' '
	LD	C,2		;AND SEND IT
	LD	E,A
	CALL	BDOS
	POP	DE		;GET X BACK                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ISTERS SAVED FOR BDOS CALL, 04-06-2000
;
CPM	EQU	5
COLD	EQU	200H
;
	GLOBAL	CLRSCN
	GLOBAL	PUTCSR
	GLOBAL	GETCSR
	GLOBAL	PUTIME
	GLOBAL	GETIME
	GLOBAL	GETKEY
	GLOBAL	BYE
;
	ASEG
	ORG	100H
;
;JUMP TABLE - BASIC makes calls to hardware-dependent
;features via this table:
;
	JP	INIT
CLRSCN:	JP	CLS		;CLEAR SCREEN
PUTCSR:	JP	PCSR		;SET CURSOR POSN.
GETCSR:	JP	GCSR		;READ CURSOR POSN.
PUTIME:	JP	PTIME		;SET ELAPSED TIME
GETIME:	JP	GTIME		;READ ELAPSED TIME
GETKEY:	JP	INKEY		;READ KEY (TIMEime clock.
;  	  Outputs: DEHL = elapsed time (centiseconds)
; 	  Destroys: A,D,E,H,L,F
;
GTIME:	LD	DE,0
	LD	HL,0
	RET
;
;PTIME	- Load elapsed-time clock.
;   	  Inputs: DEHL = time to load (centiseconds)
; 	  Destroys: A,D,E,H,L,F
;
PTIME:	RET
;
;CLS	- Clear screen.
;	  (Alter characters to suit your VDU)
; 	  Destroys: A,D,E,H,L,F
;
CLS:	PUSH	BC
	LD	C,2
	LD	E,1AH
	CALL	BDOS
	;REPEAT PREVIOUS 3 INSTRUCTIONS TO SEND ANOTHER CHAR
	POP	BC
	RET
;
;INKEY	- Sample keyboard with specifie
	LD	A,E		;ADD OFFSET
	ADD	A,' '
	LD	C,2		;AND SEND IT
	LD	E,A
	CALL	BDOS
	RET
;
;GCSR	- Return cursor coordinates.
;   	  Outputs:  DE = X coordinate (POS)
;                   HL = Y coordinate (VPOS)
;  	  Destroys: A,D,E,H,L,F
;
GCSR:	LD	DE,0
	LD	HL,0
	RET
;
	IF	$ GT 1F4H
	ERROR	'INSUFFICIENT SPACE'
	ENDIF
;
	ORG	1F4H
;
	DEFB	80		;WIDTH
	DEFB	'E' AND 1FH	;CURSOR UP
	DEFB	'X' AND 1FH	;CURSOR DOWN
	DEFB	'A' AND 1FH	;START OF LINE
	DEFB	'F' AND 1FH	;END OF LINE
	DEFB	'T' AND 1FH	;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                	gµ(Н3кНи	Sorry - file protected >НЅ	НЬ	НРЗЇНЅ	>яНЅ	>яНЅ	й!г
н°Н4	э!6 ЭЛF ЩНv	·(фю
(рю(Лю	 > эw э#([жю ШэЛяѕэ!6НҐНр|µМмн[
"
е7нRЬ6Нйл6ЇнRј }НЅ	б}НЅ	|НЅ	!6~НЅ	~#ю цГMНи	Line too long - abort Г.Ни	** Line number added **
 *
#ЙНи	** Line number out of sequence **
 ЙЂAND”ABS•ACS–ADVAL—ASCASN™ATNЖAUTOљBGET ХBPUT ыCOLOURыCOLORЦCALLЧCHAINЅCHR$ШCLEAR ЩCLOSE ЪCLG ЫCLS ›COSњCOUNT ЬDATAќDEGЭDEFЗDELETEЃDIVЮDIMЯDRAWбENDPROC аEND вENVELOPE‹ELSE EVALћERL …ERRORЕEOF ‚EORџERR ИНи	Disk full З\ >Нb	Э6  ЭЛ†<АНи	File not found З
>Нb	>Нb	Э6 <АНи	Directory full З>лНb	лЙЕХеЭеэеOН эбЭббСБ·ЙЭЛF ЕХе\ !6
 ЭN Мк	~Л№Эq бСБЙНи	End of file - abort НРЗ>НЅ	>
ЕХе ЭN
!¶
е	wбмшЛ№ЭqбСБЙЭ~·И>НЅ	фгНо	гЙ~#·ИНч	чХ_>Нb	СЙ                                                                                                                                                                                                                                                                DELETE TO END OF LINE
	DEFB	7FH		;BACKSPACE & DELETE
	DEFB	'U' AND 1FH	;CANCEL LINE
	DEFB	'S' AND 1FH	;CURSOR LEFT
	DEFB	'D' AND 1FH	;CURSOR RIGHT
	DEFB	'G' AND 1FH	;DELETE CHARACTER
	DEFB	'V' AND 1FH	;INSERT CHARACTER
;
FIN:	END
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ЎEXPўEXT гFORЈFALSE ¤FNеGOTOѕGET$ҐGETдGOSUBжGCOL“HIMEM иINPUTзIFїINKEY$¦INKEYЁINT§INSTR(ЙLIST†LINEИLOAD’LOMEM кLOCALАLEFT$(©LENйLET«LOGЄLNБMID$(лMODEѓMODмMOVEнNEXTКNEW ¬NOTЛOLD оON‡OFF„ORЋOPENIN®OPENOUT­OPENUPяOSCLIсPRINTђPAGE ЏPTR ЇPI рPLOT°POINT(тPROC±POS ОPUTшRETURN хREPEATцREPORT уREADфREMщRUN ІRADчRESTOREВRIGHT$(іRND МRENUMBER€STEPНSAVEґSGNµSIN¶SQR‰SPCГSTR$ДSTRING$(ФSOUNDъSTOP ·TANЊTHENёTOЉTAB(ьTRACE‘TIME №TRUE эUNTILєUSRпVDU»VALјVPOS юWIDTHУHIMEMТLOMEMРPAGEПPTRСTIMEяяЕХежнЎ кббСБЙэ~ ю Аэ#ц!6э~                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 1vЭ! 
!  "
Ни	CONVERT Version 2.3

 :] ю В‘Ни	CONVERT converts between BBC BASIC internal format
(.BBC ) and ASCII (.BAS).  Its options are as follows:

CONVERT               Prints this description.
CONVERT filename.BBC  Converts from BBC BASIC internal
                      format to ASCII.
CONVERT filename.BAS  Converts from ASCII to BBC BASIC
                      internal format.
 З
!\ $ н°Н	e  !гНЮ(<!жНЮКBНи	Invalid extension - must be .BBC or .BAS ЗBBCBAS!ж
н°Н4	Нv	·(,Нv	oНvF#ѕ(Ш#Л~(ырэе#Л~ э#э~ ю.(ѕ(пНР8эбЭ~· шэ+сЇxЙНz> НЅ	Нv	юК¶	ю" НMоЛCВЅ	юЌ Н€ ·тЅ	Ее!6Ён± 
~#·ДЅ	Л~(цбБЙ 'ЇнR<0ы=(ЛбЛй±ДЅ	xю()T]))иЮ7Й!  Нрэ~ ю0Шю:Рэ#)T]))ж_ зэ~ ю$Ию%Ию(Ию0Шю:?РюAШю[?Рю_Шю{?Йэ#э~ юИНР0Л©Л™ю (йю,(еюG8Л™ю" Л?ЛЛa(ЛЎЕХНҐСБ|µДЄЖ(	 ј·фъю*(·фъюЏ8ю”0Ж@юф(юЬ Лсю¤(	ют(НЧ8Лйю& ЛЩ!Е н±Б Лб!ѓЕ н±Б ЛБГеедчьЊ‹х…:Нv	оGНv	WЛІxGжАІoНv	WЛІxжАІgЙЛбл6Ќ#zжАG{жА°оTw#{ж?ц@w#zж?ц@w#лЙ
>Нb	<АНи	Close error ЗНZ	>Нb	ИЭЛЖЙНZ	>Нb	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                d -  :[Нп
:\·КHН«	
Quantity of file CRC that did not match -  :\Нп
:]·КЃН«	
Quantity of lines failed parse test -  :]Нп
:^·КґН«	
Quantity of file(s) not found -  :^Нп
*ШщЙ>2e:m 2_юFВЇ282D2X!Ъ"Т!  "Ф!  "Ц8Н 8Н <ВН«	
Directory full Г·1,НM
Ъh!e НХ
К!] J Нд
!e S Нд
Н«	
--> FILE:  XXXXXXXX.XXX		CRC =  НХКГЃ:e·КПН«	File not found :_юFВ·8Н <ВЇН«	
Cannot close CRCFILE 8Н Н«	

++ ABORTED ++ Г>:_юFВ4*Ц}жВг"Ф>хНЪ	сВЧ8Н <ВН«	
Ca "*|·К7	Н ·К 	Н юКЃЂ Н \ Н ·ВE	!Ђ ~2d#"Н}	Г	юВ]	:aН—	> Нї	:`Н—	ЇЙН«	
++ FILE READ ERROR ++
 Ї<Й*`)х:d…oсТ“	|о g}о—o"`ЙхН 	сжЖђ'О@'Гї	г~Нї	#~·В¬	гЙ>Нї	>
ЕХеж_ХНУ	СН бСБЙ:_юFА{х*Фл*Ц}“|љЪ=
!  "Цл*Ф{•zњТ/
*ТлН 8Н ·В
Ђ *Ц"ЦГп	Н«	
Disk full ГЃЂ Н !  "Цл*Тлс*Ц#"ЦЙЂ Н Ї2h 2| :e·К~
!\ ~2sg Нд
\ Н Г¦
!s\  Нд
\ Н !g\  Нд
\ Н <7И=ж‡‡‡‡‡ЖЃo& еt Нд
б]  Нд
Ї2h 2| 2eЙНЭ
АНЭ
А~жю$#Й~#x±Вд
Й dН 
Н Ж0Гї	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                nnot close CRCFILE Н !8е 	w#В&СН Н«	
DONE *ШщЙ*Фл*Ц}“|љЪ™!  "Цл*Ф{•zњТ‹*ТлН 8Н ·В…Ђ *Ц"ЦГW*Ц"ФЂ Н !  "Цл*Тл*Ф}ґ>И*Ц#"ЦЙ:\ хЇ2\ <2eНM
б|2\ ТЮН«	
File not found Ї<Й!] 9 Нд
Ї282D2X!  "Ф"Ц!Ъ"Т8Н <КЗ!9‚ Нд
>. Нд
ЇН«	
Checking with file -  !‚~·КQНї	#ГEНё	Нё	Ї2[2\2]2^Й!‚Ї2ЃеНCбюВ§:Ѓ·ВИ:f·7ИН«	
*** No CRC Files found *** >·ЙжюКБю
КБw#:Ѓ<2ЃюPЪl:Ѓ·Кe6 ЇЙН«	Cannot parse string
 !‚~·КфНї	#ГиНё	!‚К>яђТЂWyіКц0Нї	0zЙ CRCKLISTCRC sk full ГЃЂ Н ! CRCKLIST$$$                                                                                                                                                                                                                                                                                                                                                                                                                                                            
--> FILE:  BBCDIST .MAC		CRC = 38 8E
--> FILE:  BBCBASIC.COM		CRC = 65 81
--> FILE:  CONVERT .COM		CRC = 6F FA
--> FILE:  MERGE   .BBC		CRC = 6C 7F
--> FILE:  ANIMAL  .BBC		CRC = 53 35
--> FILE:  SORT    .BBC		CRC = 54 C1
--> FILE:  SORTREAL.BBC		CRC = FA 50
--> FILE:  F-RSER2 .BBC		CRC = 93 54
--> FILE:  F-WSER1 .BBC		CRC = 4D E6
--> FILE:  F-WSTD  .BBC		CRC = 64 73
--> FILE:  F-WSER2 .BBC		CRC = A9 BF
--> FILE:  F-RAND1 .BBC		CRC = 9F 11
--> FILE:  F-WESER1.BBC		CRC = 1F E1
--> FILE:  F-WESГ9CRC.COM 6.5 14/09/86 CRCKLIST???CRCKFILE???-CATALOG???!  9"Ш1,Н«	
CRC Ver 6.5
CTL-S pauses, CTL-C aborts
 :] ю В№>2f2_Н«	
++ Searching for CRCKLIST file ++ ] ! Нд
Н°К–Н«	
++ Searching for CRCKFILE file ++ ] !# Нд
Н°К–Н«	
++ Searching for -CATALOG file ++ ] !. Нд
Н°В·НeЪХВ· !‚НqВ‰>.ѕВ‰#Н|В‰НYВ‰Н)В‰НYВђНЂВђНЂКgюKВђ#НYВђНйВђ*YН3Г-:f·В-НМГ-НeЪХВ·?!‚ Н'ВПН)ВПVН'ВПНйВП!ЌН3Г–НМГ–Н«	
DONE
Quantity of file CRC that matche	ѕК6 #Вя6^#6 !‚~·К Нї	#Г!]4Гё	ѕА#x№ИГ'е]  Нд
# e Нд
Їwб~·КVНї	#ГJ>2eН«	 -  НM
ТѓН«	File not found
 !^4Гz	НХА:cG:`ёВµ:bG:aёВµН«	 *Match*
 Ї2f![4ЇЙН«	 <-- is, was -->  :bН—	> Нї	:cН—	Нё	Ї2f!\4Ї<ЙН¤А2b~ю КН«	Not a space between CRC values
 Ї<Й#Н¤А2cGЇЙ"YН’АН’К=ю А#В2~ю.А#Н’КTю А#ВIЙ~ю Кbю	А#~ю Кbю	КbїЙН|АНЂИю.ЙНЂА~ю0ЪЏю:ТЏ#їЙю0Й~ю!ЪЎюТЎ#їЙюAЙНґАOНґА±їЙ~ю0ЪУЦ0ю
ЪПжЦю
ЪУюТУ#їЙ·Й\ Н <ВщН«	++ OPEN FAILED ++ Гz	!  "`!                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ER2.BBC		CRC = 8B 30
--> FILE:  F-RSTD  .BBC		CRC = 35 14
--> FILE:  F-RSER1 .BBC		CRC = C1 63
--> FILE:  F-RAND0 .BBC		CRC = 98 C5
--> FILE:  F-RAND2 .BBC		CRC = B0 98
--> FILE:  F-INDEX .BBC		CRC = B8 BD
--> FILE:  READ    .ME 		CRC = 11 E1
--> FILE:  ANIMAL  .DAT		CRC = 08 67
--> FILE:  CRC     .COM		CRC = BC 7B
--> FILE:  BBCBASIC.TXT		CRC = 1F 2A                                                                                                                                
 ф F_INDEX  ф EXAMPLE OF AN INDEXED FILE :;( ф This is a simple address book filing system.  It will=2 ф accept names, telephone numbers and addresses and store9< ф them in a file called ADDRESS.DTA.  The index is in:F ф name order and is kept in a file called ADDRESS.NDX.9P ф All the fields are character and the maximum lengthZ ф of any field is 30.d :n :x т_initialise‚ т_open_filesЊ х– Ы   с Љ5,3);"If you want to:-" '+Є с Љ10);"End This Session";Љ55);"Type 0"%ґ с Љ10);"Enter D$;0ји "What name do you want to look for ",name$Жз name$="" Њ ЌdZBBРз name$<>""з name$="DELETE" т_delete(i) ‹ i=¤_display(i,name$)Ъэ name$=""дшо:ш: ф LIST IN ALPHABETICAL ORDER:entry=1 с curoff$;*х4Ы>line_count=0HхRс Љ0,line_count);\т_read_data(entry)fт_print_datapentry=entry+1zline_count=line_count+8„temp$=ї(0).Ћэ entry>length „ line_count>16 „ temp$<>""6т_message("Push any key to continue or E to end ")ўэ entry>length „ ѕ="E"¬с curomaxrec, is set/read in ѕф PROC_setup/PROC_read_indexИ:ТЮ message$(7)Ьг i=1 ё 7жу message$(i)рнAъЬ Name,Phone Number,Address,-- " --,-- " --,-- " --,Post Code:Ю data$(7)г i=1 ё 7"data$(i)=Д30," "),н6temp$=Д255," ")@temp$=""JбT:^:hф OPEN THE FILESr:|Э т_open_files†indexnum=­"NAME.NDX"ђdatanum=­"ADDRESS.DTA"3љз indexnum=0 „ datanum=0 т_setup ‹ т_read_index¤б®:ё:%Вф SET UP NEW INDEX AND DATA FILESМ:ЦЭ т_setupаЫ&кс Љ0,13);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ata";Љ55);"Type 1"5ѕ с Љ10);"Search For/Delete an Entry";Љ55);"Type 2"5И с Љ10);"List in Alphabetical Order";Љ55);"Type 3">Т с Љ10);"Reorganise the Data File and Index";Љ55);"Type 4";Ь хж с Љ5,11);6р с "Please enter the appropriate number (0 to 4) ";ъ function$=ѕс clrline$;#э function$>"/" Ђ function$<"5"function=»(function$) "с Љ54,function+5);"<====<<";&,о function д ЌtZA,Ќt^B,ЌTVC,ЌdhC ‹6э function=0@ЫJт_close_filesTЫ#^с "Address Book Files Closed"''hаr:|:n$;¶шА:К:(Фф REORGANISE THE DATA FILE AND INDEXЮ:иentry=15тс Љ0,13);"Reorganising the Data File and Index" 'ьnewdata=®"ADDRESS.BAK"newindex=®"NAME.BAK"6з newdata=0 „ newindex=0 с "Disk Directory Full":ас#newdata,0$х.т_read_data(entry)8index(entry)=Џ#newdataBг i=2 ё 7Lс#newdata,data$(i)Vн`entry=entry+1jэ entry>lengthtEOFnewdata=Џ#newdata-1~П#newdata=0€с#newdata,EOFnewdata’Щ#0,њс "Re-naming the Data and Index Files" ' ¦*REN ADDRESS.$$$=A"Setting Up Address Book"фmaxrec=10юindexnum=®"NAME.NDX"datanum=®"ADDRESS.DTA"6з indexnum=0 „ datanum=0 с "Disk Directory Full":ас#indexnum,0,maxrec&с#datanum,0&0Ю index$(maxrec+1),index(maxrec+1):length=0Dindex$(0)=""Nindex(0)=0Xindex$(1)=Ѕ(&FF)bindex(1)=0lбv:Ђ:(Љф READ INDEX AND LENGTH OF DATA FILE”:ћЭ т_read_indexЁЫІи#indexnum,EOFindex,maxrec'јЮ index$(maxrec+1), index(maxrec+1)Жindex$(0)=""Рindex(0)=0Ъlength=0дхоlength=length+1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                †ф ENTER DATAђ:
љflag=№¤temp$=""®i=1ёхВхМт_get_data/Цз length=maxrec „ data$(1)="" flag=Ј:е ЌT\B>аз data$(1)="+" „ data$(1)="-" т_message("Bad Data"):е ЌT\Bкi=¤_find_place(0,data$(1))'фз i>0 т_message("Duplicate Record")!юс '"Is this data correct ? ";temp$=ѕ:э ¬ flag „ temp$="Y"&з ¬ flag Њ ЌDbB%0т_put_index(i,data$(1),Џ#datanum):г i=2 ё 7Dс#datanum,data$(i)NнX:bэ ¬ flaglшv:Ђ:Љф SEARCH FOR AN ENTRY”:ћi=1ЁхІс Љ0,11);cteolDDRESS.BAK°*REN NAME.$$$=NAME.BAK є*REN ADDRESS.BAK=ADDRESS.DTA Д*REN ADDRESS.DTA=ADDRESS.$$$О*REN NAME.BAK=NAME.NDXШ*REN NAME.NDX=NAME.$$$вindexnum=­ "NAME.NDX"мdatanum=­ "ADDRESS.DTA"ци#datanum,EOFdata П#datanum=EOFdata+1
ш::%(ф INITIALISE VARIABLES AND ARRAYS2:<:F:PЭ т_initialiseZesc$=Ѕ(27)dbell$=Ѕ(7)ncteol$=Ѕ(5)xcteos$=Ѕ(4)‚return$=Ѕ(13)Њclrline$=return$+cteol$–curoff$=esc$+"D" curon$=esc$+"C"Є:7ґф The maximum record number, +ши#indexnum,index$(length),index(length)э Џ#indexnum>EOFindexindex$(length+1)=Ѕ(&FF)index(length+1)=0 и#datanum,EOFdata*П#datanum=EOFdata+14б>:H:>Rф WRITE INDEX, MAXREC AND NEW EOF POINTERS AND CLOSE FILES\:fЭ т_close_filespEOFdata=Џ#datanum-1zП#datanum=0„с#datanum,EOFdataЋП#indexnum=10г i=1 ё length!ўс#indexnum,index$(i),index(i)¬н¶EOFindex=Џ#indexnum-1АП#indexnum=0Кс#indexnum,EOFindex,maxrecФЩ#0Юби:т: ьф WRITE A MESSAGE AT Lata|б†:ђ:љф PRINT data$() ON VDU¤:®Э т_print_dataёк iВг i=1 ё 73Мз data$(i)<>"" с Љ10);message$(i);Љ25);data$(i)Цз data$(1)=Ѕ(&FF) i=7анкбф:ю:,ф PUT A NEW ENTRY IN INDEX AT POSITION i:Э т_put_index(i,entry$,ptr)&к j0з i<0 i=-i:г j=length+1 ё i € -1Dindex$(j+1)=index$(j)Nindex(j+1)=index(j)Xнbindex$(i)=entry$lindex(i)=ptrvlength=length+1ЂбЉ:”:,ћф FIND ENTRY IN INDEX OR PLACE TO PUT ITЁ:ІЭ ¤_find_place(i,entry$)ј                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                NDZERO"!И з fnum=0 с "Directory Full":аТ :Ь х"ж и '"Enter record number: "ans$р з ans$="0" Щ#fnum:Ы:а.ъ з ans$="" record=record+1 ‹ record=»(ans$)П#fnum=¤_ptr(record)т_display/и '"Do you wish to change this record",ans$"П#fnum=¤_ptr(record),з ¤_test(ans$) т_modify6э Ј@аJ:T:)^Э ¤_test(A$) =АA$,1)="Y" „ АA$,1)="y"h:rЭ ¤_ptr(record)=record*83|:†Э т_displayђс '"Record number ";record'љflag=љ#fnum-¤з Е#fnum „ flag=0 с "Record not stored":б®и#fnum,namINE 23	:	Э т_message(line$)		к x,y$	x=±.	y=ј8	с Љ0,23);bell$;line$;B	с Љx,y);L	бV	:`	:'j	ф GET INPUT DATA - LIMIT TO 30 CHARt	:~	Э т_get_data€	к i’	с Љ0,13);cteos$2њ	з length=maxrec т_message("Address Book Full")¦	г i=1 ё 7°	с Љ10);message$(i);Љ25);є	и temp$Д	data$(i)=Аtemp$,30)О	з data$(1)="" i=7Ш	нв	бм	:ц	:) 
ф FIND AND DISPLAY THE REQUESTED DATA

:
Э ¤_display(i,name$)
с Љ0,12);cteos$(
i=¤_find_place(i,name$):2
з i<0 т_message("Name Not Known к top,bottomЖз i<0 i=-i Рз entry$="+" Ђ i<length =i+1Ъз entry$="+" Ђ i=length =1дз entry$="-" Ђ i>1 =i-1 оз entry$="-" Ђ i=1 =lengthшtop=length+1bottom=0i=(top+1) Ѓ 2*з entry$<>index$(i) i=¤_search(entry$) х*з entry$=index$(i-1) i=i-14э entry$<>index$(i-1)>з entry$=index$(i) =i ‹ =-iH:R:(\ф DO THE SEARCHING FOR FN_find_placef:pЭ ¤_search(entry$)zх'„з entry$>index$(i) bottom=i ‹ top=i"Ћi=(top+bottom+1) Ѓ 2:  ф round%э entry$=index$(i) „ top=bot                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                e$,remark$ёс name$;"  ";remark$ 'ВбМ:ЦЭ т_modify(ас '"(Enter <RETURN> for no change)"'ки "Name ",temp$фtemp$=Аtemp$,30)юз temp$<>"" name$=temp$и "Remark ",temp$temp$=Аtemp$,50)з temp$<>"" remark$=temp$#&и '"Confirm update record",ans$0з ¬ ¤_test(ans$) б:Х#fnum,255Dс#fnum,name$,remark$Nб яяt
 
      (  2  <  F  P   Z " d $ n                                                                                                                                - Next Highest Given")<
т_read_data(i)F
сP
т_print_dataZ
=id
:n
:%x
ф DELETE THE ENTRY FROM THE INDEX‚
:Њ
Э т_delete(i)–
и "Are you SURE ",temp$ 
с Љ0,ј-1);cteos$;Є
з temp$<>"YES" бґ
з i<0 i=-iѕ
г i=i ё lengthИ
index$(i)=index$(i+1)Т
index(i)=index(i+1)Ь
нж
length=length-1р
бъ
::ф READ DATA FOR ENTRY i:"Э т_read_data(i),PTRdata=Џ#datanum6з i<0 i=-i@П#datanum=index(i)Jdata$(1)=index$(i)Tг i=2 ё 7^и#datanum,data$(i)hнrП#datanum=PTRdtom+1ў=i яя
 
     ( ( 2 2 < < F F P P Z Z d d n n x x ‚ ‚ Њ Њ – –     Є Є ґ ґ ѕ ѕ И И Т Т Ь Ь ж ж р р ъ ъ "                                                                                                                                                                                                                                                                                                                                                                                                
 ф F_RAND0 :' ф VERY SIMPLE RANDOM ACCESS PROGRAM( ::2 ф This program maintains a random access file of names:< ф and remarks.  Each name can be up to a maximum of 30:F ф characters long and each remark up to 50 characters.;P ф The first byte of the record is set non zero (in fact6Z ф &FF) if there is a record present.  This gives a8d ф maximum record length of 1+31+51=83. (Don't forgetn ф the CRs.)x :‚ :	Њ @%=10– temp$=Д50," ")  ЫЄ ю 0ґ fnum=­ "RANDZERO"ѕ з fnum=0 fnum=® "RA                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                per record: "fields,¤Ю title$(fields),size(fields),A$(fields)®г field=1 ё fields1ёс '"Enter title of field number ";field;": ";Ви ""title$(field)МсЦх6аи "Maximum size of field (characters)",size(field)%кэ size(field)>0 Ђ size(field)<256фн fieldюlength=1с#fnum,fieldsг field=1 ё fields$с#fnum,title$(field),size(field)&length=length+size(field)+10н field:бD:NЭ т_readgenXlength=1bи#fnum,fields,lЮ title$(fields),size(fields),A$(fields)vг field=1 ё fi                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
 ф F_RAND2 :& ф Written by Doug Mounter - Jan 82( :%2 ф EXAMPLE OF A RANDOM ACCESS FILE< :6F ф This is a simple inventory program.  It uses the/P ф item's part number as the key and stores:7Z ф   The item description  - character max length 30'd ф   The quantity in stock - numeric'n ф   The re-order level    - numeric'x ф   The unit price        - numeric7‚ ф In addition, the first byte of the record is used8Њ ф as a valid data flag.  Set to 0 if empty, D if the3– ф record has been dele
 ф F_RAND1 ф SIMPLE DATABASE PROGRAM& ф Written by R T Russell  Jan 1983( :;2 ф This is a simple database program.  You are asked for8< ф the name of the file you wish to use.  If the file:F ф does not already exist, you are asked to specify the9P ф number and format of the records.  If the file does8Z ф already exist, the file specification is read fromd ф the file.n :x :	‚ @%=10Њ Ы– ю 07  и '"Enter the filename of the data file: "filename$Є fnum=­(filename$) ґ з fnum=0 т_setupelds$Ђи#fnum,title$(field),size(field)Љlength=length+size(field)+1”н fieldћбЁ:ІЭ т_displayјс '"Record number ";record'Жflag=љ#fnum-Рз Е#fnum „ flag=0 с "Record not stored":бЪг field=1 ё fieldsди#fnum,A$(field)!ос title$(field);" ";A$(field)шн fieldб:Э т_modify( с '"(Enter <RETURN> for no change)"'*г field=1 ё fields4х>с title$(field);" ";Hи † ""A$.Rз A$="" с Ѕ(11)title$(field);" ";A$(field)\э ©(A$)<=size(field)fз A$<>"" A$(field)=A$pн                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 ted or V if the record is  ф valid.0Є ф This gives a MAX record length of 47 bytes,ґ ф (Don't forget the CR after the string)ѕ :И :Т т_initialise!Ь inventry=¤_open("B:INVENTRY")ж хр Ыъ с Љ5,3);"If you want to:-"'+с Љ10);"End This Session";Љ55);"Type 0"3с Љ10);"Amend or Create an Entry";Љ55);"Type 1"=с Љ10);"Display the Inventory for One Part";Љ55);"Type 2"="с Љ10);"Change the Stock Level of One Part";Љ55);"Type 3"@,с Љ10);"Display All Items Below Reorder Level";Љ55);"Type 4"<6 ‹ т_readgenѕ base=Џ#fnum:сИ :Т х"Ь и '"Enter record number: "ans$ж з ans$="0" Щ#fnum:Ы:а.р з ans$="" record=record+1 ‹ record=»(ans$)ъ П#fnum=¤_ptr(record)т_display/и '"Do you wish to change this record",ans$П#fnum=¤_ptr(record)"з ¤_test(ans$) т_modify,э Ј6а@:)JЭ ¤_test(A$) =АA$,1)="Y" „ АA$,1)="y"T:&^Э ¤_ptr(record)=base+record*lengthh:rЭ т_setup|с "New file."†fnum=®(filename$).ђз fnum=0 с "Sorry, disk directory full.":а1љи "Enter number of fields field#zи '"Confirm update record",ans$„з ¬ ¤_test(ans$) бЋХ#fnum,255г field=1 ё fieldsўс#fnum,A$(field)¬н field¶б яя
 
     ( ( 2 2 < < F F P P Z Z d d n n x x ‚ ‚ Њ Њ – –     Є Є ґ ґ ѕ ѕ И И Т Т Ь Ь ж ж р р ъ ъ "",                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                с Љ10);"Recover a Previously Deleted Item";Љ55);"Type 5"-@с Љ10);"List Deleted Items";Љ55);"Type 6"1Jс Љ10);"Set Up a New Inventory";Љ55);"Type 9"Tх^с Љ5,15);bell$;;hс "Please enter the appropriate number (0 to 6 or 9) ";rfunction$=ѕ3|э function$>"/" Ђ function$<"8" „ function$="9"†function=»(function$)?ђо function д ЌdtA,Ќt^B,ЌTjC,ЌDLD,ЌDFE,ЌTDF,ЌdjF,Ќd~F,ЌTpG ‹љэ function=0¤Ы ®с "Inventory File Closed" ''ёЩ#inventryВаМ:Ц:аф AMEND/CREATE AN ENTRYк:фхюЫ to update any more stock levels ? ";э ѕ="N"ш$:.:'8ф DISPLAY ITEMS BELOW REORDER LEVELB:Lpartno=1Vх`Ы"jс "ITEMS BELOW REORDER LEVEL"'tline_count=2~х€flag=¤_getrec(partno,—"V")#’з ¬ (flag Ђ stock<reord) Њ ЌdNDњс "Part Number ";partno5¦с desc$;"  Stock ";stock;"  Reorder Level ";reord°сєline_count=line_count+3Д:Оpartno=partno+1Шtemp$=ї(0)2вэ partno>maxpartno „ line_count>20 „ temp$<>"";мс Љ0,23);bell$;"Push any key to continue or E to end ";цure you want to set up a new inventory?"BDс "You will DESTROY ALL THE DATA YOU HAVE ACCUMULATED so far."GNс '"It would be safer to use a new disk in drive B and start a new"Xс "inventory file."'4bс "If you are SURE you want to do it, enter YES"<lс "If you want to start a new inventory file, enter NEW")vи "Otherwise, just hit return ",temp$#Ђз temp$="YES" т_setup(inventry)Љз temp$="NEW" function=0”шћ:Ё:,Іф INITIALISE ALL THE VARIOUS PRESETS ETCј:ЖЭ т_initialiseРbell$=Ѕ(7partno€	П#fnum=¤_ptr(partno)’	Х#fnum,0њ	н¦	partno=0°	бє	:Д	:-О	ф GET AND RETURN THE REQUIRED PART NUMBERШ	:в	Э ¤_getpartnoм	хц	с Љ0,5);cteos$;bell$;6 
с "Enter a Part Number Between 1 and ";maxpartno '

з partno=maxpartno Њ ЌTrJ*
с "The Next Part Number is ";partno+1;&
с "  Just hit RETURN to get this"'(
:12
и "What is the Part Number You Want ",partno$*<
з partno$<>"" partno=»(partno$):е ЌDZJ1F
з partno=maxpartno partno=0 ‹ partno=partno+1P
:Z
с Љ35,9);partno;cteol$ 'с "AMEND/CREATE"partno=¤_getpartnoflag=¤_getrec(partno,—"V")&т_display(flag)0с'"Do you wish to ";9:з flag с "change this entry ? "; ‹ с "enter data ? ";*Dз ѕ<>"N" flag=¤_amend(partno):с cteos$Nт_write(partno,flag,type)<Xс bell$;"Do you wish to amend/create another record ? ";bэ ѕ="N"lшv:Ђ:Љф DISPLAY AN ENTRY”:ћхЁЫІс "DISPLAY"јpartno=¤_getpartnoЖflag=¤_getrec(partno,—"V")Рт_display(flag)Ъс '.дс "Do you wish to view another record ? ";оэ ѕtemp$=ѕ" э partno>maxpartno „ temp$="E"
partno=0ш:(:2ф RECOVER A DELETED ENTRY<:FхPЫZс "RECOVER DELETED RECORDS"dpartno=¤_getpartnonflag=¤_getrec(partno,—"D")xт_display(flag)‚сЊз ¬ flag Њ Ќt~E2–с "If you wish to recover this entry type Y "; temp$=ѕ)Єз temp$="Y" т_write(partno,flag,—"V")ґ:?ѕс return$;bell$;"Do you wish to recover another record ? ";Иэ ѕ="N"ТшЬ:ж:рф LIST DELETED ENTRIESъ:partno=1хЫ"с "DELETED ITEMS"',)Ъreturn$=Ѕ(13)дcteol$=Ѕ(5)оcteos$=Ѕ(4)шclrline$=return$+cteol$rec_length=47partno=0desc$=Д30," ") temp$=Д40," ")*ю 04б>:H:.Rф OPEN THE FILE AND RETURN THE FILE NUMBER\:7fф If the file already exists, the largest permitted)pф part number is read into maxpartno.9zф If it is a new file, file initialisation is carried2„ф out and the largest permitted part number is"Ћф written as the first record.:ўЭ ¤_open(name$)¬fnum=­(name$)$¶з fnum>0 и#fnum,m6d
э partno>0 Ђ partno<maxpartno+1 Ђ Ё(partno)=partnon
=partnox
:‚
:(Њ
ф GET THE RECORD FOR THE PART NUMBER–
:7 
ф Return TRUE if the record exists and FALSE if not?Є
ф If the record does not exist, load desc$ with "No Record"-ґ
ф The remainder of the record is set to 0ѕ
:И
Э ¤_getrec(partno,type)Т
stock=0Ь
reord=0ж
price=0р
П#inventry=¤_ptr(partno)ъ
test=љ#inventry"з test=0 desc$="No Record": =Јз test=type Њ ЌTvK<з type=86 desc$="Record Deleted" ‹ desc$="Record Exists"="N"шш::)ф CHANGE THE STOCK LEVEL FOR ONE PART :*х4Ы>с "CHANGE STOCK"Hpartno=¤_getpartnoRflag=¤_getrec(partno,—"V")\хfт_display(flag)pс cteos$;zх„с Љ0,12);cteol$;)Ћи "What is the stock change ? " temp$change=»(temp$)(ўэ Ё(change)=change Ђ stock+change>=0¬з temp$="" flag=Ј:е ЌdhC¶stock=stock+changeАт_display(flag)Кс'"Is this correct ? ";Фtemp$=ѕЮ:иэ ¬ flag „ temp$="Y"тт_write(partno,flag,—"V")ьс return$;bell$;7с "Do you wantline_count=26х@flag=¤_getrec(partno,—"D")Jз ¬ flag Њ ЌD|FTс "Part Number ";partno^с "Description ";desc$'hline_count=line_count+3r:|partno=partno+1†temp$=ї(0)2ђэ partno>maxpartno „ line_count>20 „ temp$<>"";љс Љ0,23);bell$;"Push any key to continue or E to end ";¤э partno>maxpartno „ ѕ="E"®partno=0ёшВ:М:2Цф DUMMMY RETURNES FOR INVALID FUNCTION NUMBERSа:кшф:юш::*ф REINITIALISE THE INVENTORY DATA FILE&:0ЫD:с Љ0,3);bell$;"Are you saxpartno: =fnumАfnum=®(name$))Кз fnum=0 с "Disk Directory Full."!!:аФЫЮт_setup(fnum)	и=fnumт:ьф SET UP THE FILE	:5	ф Ask for the maximum part number required, write3	ф it as the first record and then write 0 in to%$	ф the first byte of every record..	:8	Э т_setup(fnum)B	хL	с Љ0,12);cteos$;bell$;FV	и "What is the highest part number required (Max 5000) ",maxpartno;`	э maxpartno>0 Ђ maxpartno<5000 Ђ Ё(maxpartno)=maxpartnoj	П#fnum=0t	с#fnum,maxpartno~	г partno=1 ё max"=Ј,:6и#inventry,desc$ @и#inventry,stock,reord,priceJ=№T:^:0hф CALCULATE THE VALUE OF PTR FOR THIS RECORDr:2|Э ¤_ptr(partno)=partno*rec_length+5-rec_length†:ђ:љф AMEND THE RECORD¤:®Э ¤_amend(partno)ёс clrline$;Љ0,4);;Вс "Please Complete the Details for Part Number ";partno4Мс "Just hit Return to leave the entry as it is"'
Цflag=Јаtype=—"V")ки "Description - Max 30 Chars " temp$"фз temp$="DELETE" type=—"D": =№юtemp$=Аtemp$,30)"з temp$<>"" desc$=t
 ф F_RSER :0 ф EXAMPLE OF READING A SERIAL CHARACTER FILE( :G2 ф This program opens a previously written serial file and reads it.< :F :P phonenos=­ "PHONENOS"6Z с "File Name PHONENOS Opened as Channel ";phonenosd сn хx и#phonenos,name$,phone$‚ з Е#phonenos Њ т_endЊ с name$,phone$– э Ј  :Є Э т_endґ Щ#phonenosѕ а яя&;honenos      PHONENOSBBC  Ђ                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ie its length-1.r:|Э т_open(name$)†file_num=­(name$)ђи#file_num,EOFfnumљб яя  ave       < F F P P Z Z d d n n x                                                                                                                                                                                                                                                                                                                                                                                                 emp$:flag=№3з desc$="No Record" „ desc$="Record Deleted" =Ј)и "Current Stock Level        " temp$%&з temp$<>"" stock=»(temp$):flag=№)0и "Reorder Level              " temp$%:з temp$<>"" reord=»(temp$):flag=№)Dи "Unit Price                 " temp$%Nз temp$<>"" price=»(temp$):flag=№	X=flagb:l:vф WRITE THE RECORDЂ:ЉЭ т_write(partno,flag,type)”з ¬ flag бћП#inventry=¤_ptr(partno)ЁХ#inventry,type&Іс#inventry,desc$,stock,reord,priceјбЖ:Р: Ъф DISPLAY THE RECORD                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
 ф F_RSER2 :H ф EXAMPLE OF READING FROM A SERIAL MIXED NUMERIC/CHARACTER DATA FILE( :I2 ф This program opens a data file and reads numeric and character data< ф from it.F :?P ф When the file is opened its length is read from the firstDZ ф record and used to determine when the end of the data has beenFd ф reached.  A procedure is used to open the file; it sets both the@n ф file number and the length of the file.  In effect it is a"x ф function returning 2 values.‚ :Њ :7– т_open("STATS                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                DETAILSд:оЭ т_display(flag)шс Љ0,5);cteos$;+с "Part Number                ";partno')с "Description                ";desc$з ¬ flag б) с "Current Stock Level        ";stock)*с "Reorder Level              ";reord)4с "Unit Price                 ";price>б яя
 
      (  2  < ( F 2 P < Z F d P n Z x d ‚ n Њ x – ‚   Њ Є – ґ   ѕ Є И ґ Т ѕ Ь И ж Т р Ь ъ р                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 "):    ф Sets both file_num and length  stats=file_numЄ EOFstats=EOFfnum0ґ с "File Name STATS Opened as Channel ";statsѕ сИ х!Т и#stats,name$,age,height,sex$Ь с "Name ";name$ж с "Age ";age%р с "Height in centimeters ";height&ъ з sex$="M" Њ с "Male" ‹ с "Female"сэ Џ#stats>EOFstats:"Э т_end,Щ#stats6а@:J:>Tф Open the file and read its length from the first record.D^ф Set the file number (stats) and the position of the last valid4hф data byte in the file (eof) - 
 ф F_RSTD :/ ф EXAMPLE OF READING A COMPATIBLE DATA FILE( :D2 ф This program opens a data file and reads numeric and character>< ф data from it.  The data is read a byte at a time and the;F ф appropriate action taken depending on whether it is a1P ф character, a comma, or a control character.Z :d :n compat=­("COMPAT")2x с "File Name COMPAT Opened as Channel ";compat‚ сЊ х– name$=¤_read  с "Name ";name$Є age=»(¤_read)ґ с "Age ";ageѕ height=»(¤_read)%И с "Height in centimete                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                lue of PTR (the length of the file).Њ :D– ф Functions are also used to accept and validate the data before  ф writing it to the file.Є :ґ :ѕ stats=¤_open("STATS")0И с "File Name STATS Opened as Channel ";statsТ сЬ хж name$=¤_nameр з name$="" Њ т_endъ age=¤_ageheight=¤_heightsex$=¤_sexс!"с#stats,name$,age,height,sex$,э Ј6:@Э т_end4Jс "The last byte was written at ";¤_close(stats)Tа^:h:Drф Open the file and, if it exists, set PTR to the end and returnrs ";heightТ sex$=¤_read&Ь з sex$="M" Њ с "Male" ‹ с "Female"ж ср э Јъ ::>ф Read a data item from the file.  Treat commas and CRs asAф data item terminators and Control Z as the file terminator.@"ф Since we are not interested in reading a record at a time,B,ф the record terminator CR LF is of no spacial interest to us.6:@Э ¤_readJк data$,byte$,byteTdat$=""^хhbyte=љ#compatrз byte=&1A Њ Щ#compat: а=|з ¬(byte=&0A „ byte=&0D „ byte=&2C) Њ data$=data$+Ѕ(byte)†э by
 ф F_WESER1 :E ф EXAMPLE OF WRITING A TO THE END OF A SERIAL CHARACTER DATA FILE( :F2 ф This program opens a file and sets PTR to the end before writing< ф more data to it.F :*P ф A function is used to open the file.Z :d :"n phonenos=¤_openend("PHONENOS")6x с "File Name PHONENOS Opened as Channel ";phonenos‚ сЊ х– и "Name ? " name$  з name$="" Њ т_endЄ и "Phone Number ? " phone$ґ сѕ с#phonenos,name$,phone$И э ЈТ :Ь Э т_endж Щ#phonenosр аъ ::ф Open the f                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                D|ф the file number.  If it does not exist, open it, write a dummy<†ф length as the first record and return the file number.ђ:љЭ ¤_open(name$)¤к fnum,ptr®fnum=­(name$)3ёз fnum>0 Њ и#fnum,EOFfnum:П#fnum=EOFfnum: =fnumВfnum=®(name$)Мс#fnum,0	Ц=fnumа:к:Eфф Write the length of the file to the first record and then close/юф the file.  Return the length of the file.:Э ¤_close(fnum)к EOFfnum&EOFfnum=Џ#fnum-10П#fnum=0:с#fnum,EOFfnum
DЩ#fnumN=EOFfnumX:te=&0D „ byte=&2C
ђ=data$ яя+  ( ( 2 2 < < F F P P d Z n d ѕ n И x Т ‚ Ь Њ ж – л   ъ Є я ґ ѕ 	И Т Ь ,ж @р |ъ †ђ                                                                                                                                                                                                                                                                                                                                                                                                ile 'AT END'.:E"ф PTR is set to the last valid data byte+1 and the file number isH,ф returned.  If the file does not already exist, it is still opened,6ф but PTR is left at 0.@:JЭ ¤_openend(name$)
Tк fnum^fnum=­(name$)#hз fnum=0 Њ fnum=®(name$): =fnumrП#fnum=(ў#fnum)-128|х†last_PTR=Џ#fnumђи#fnum,dummy$љэ Е#fnum Ђ dummy$=""¤П#fnum=last_PTR	®=fnum яя  ave      Нь>"х:"г;{2ч:!Ї:б: ГЮ:;2;!2 НD>!б:Н>*с:НA*х::ч:_Н7>G{·Кц>HН7>GН#>yВп>Кр>Ц OН7>xFНь>ГТ>*с:ГAЕХе
 ф F_WESER2 :G ф EXAMPLE OF WRITING AT THE END OF A SERIAL MIXED NUMERIC/CHARACTER( ф DATA FILE2 :I< ф This program opens a data file, sets PTR to its end and then writes(F ф numeric and character data  to it.P :GZ ф If the file is being opened for the first time, a dummy length isEd ф written as the first record.  When the file is closed the firstCn ф record is changed to the value of PTR.  Functions are used toFx ф open and close the file.  The closing function returns the final,‚ ф vab:Dlф Accept a name from the keyboard and make sure it consists onlyCvф of spaces and upper or lower case characters.  Leading spaces)Ђф are automatically ignored on input.Љ:”Э ¤_nameћк name$,FLAG,nЁх
ІFLAG=№ји "Name ? " name$Жз name$="" Њ ЌTBCРг I=1 ё ©(name$)Ъn=—(Бname$,I,1))3дз ¬(n=32 „ n>64 Ђ n<91 „ n>96 Ђ n<123) Њ FLAG=№он1шз ¬ FLAG Њ с "No funny characters please !!!"
э FLAG
=name$: :J*ф Accept the age from the keyboard and round to one place of                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 Ь а яяnяП;honenos      PHONENOSBBC   c                  яНFRED0123 23445DOUGWATTON 882110NOELATTLEBOROUGH 452163JOHN                                                                                                                                                                                                                                                                                                                                                                                                
 ф F_WSER2 :? ф EXAMPLE OF WRITING TO A MIXED NUMERIC/CHARACTER DATA FILE( :E2 ф This program opens a data file and writes numeric and characterD< ф data to it.  The use of OPENOUT ensures that, even if the file<F ф existed before, it is cleared before being written to.P :DZ ф When the file is opened a dummy length is written as the firstEd ф record and when the file is closed this is changed to the finalGn ф value of PTR.  Functions are used to open and close the file. TheHx ф closing fundecimals.F4ф Ages of 0 and less or 150 or more are considered to be in error.>:HЭ ¤_age	Rк age\хfи "What age ? " age<pз age<=0 „ age >=150 Њ с "No impossible ages please !!!"zэ age>0 Ђ age<150„=Ё(age*10+.5)/10Ћ::Eўф Accept the height in centimeters from the keyboard and round toF¬ф an integer. Heights of 50 or less and 230 or more are considered¶ф to be in error.А:КЭ ¤_heightФк heightЮх'ии "Height in centimeters ? " height4тз height<=50 „ height>=230 Њ с                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ction returns the final value of PTR (the length of the‚ ф file).Њ :D– ф Functions are also used to accept and validate the data before  ф writing it to the file.Є :ґ :ѕ stats=¤_open("STATS")0И с "File Name STATS Opened as Channel ";statsТ сЬ хж name$=¤_nameр з name$="" Њ т_endъ age=¤_ageheight=¤_heightsex$=¤_sexс!"с#stats,name$,age,height,sex$,э Ј6:@Э т_end5Jс "The final byte was written at ";¤_close(stats)Tа^:h:Erф Open the file and write a dummy "Verry funny !!!"ьэ height>50 Ђ height<230=Ё(height+.5)::H$ф Accept the sex from the keyboard.  Only words beginning with upperB.ф or lower case M or F are acceptable.  The returned string is8ф truncated to 1 character.B:LЭ ¤_sexVк sex$,FLAG`х
jFLAG=№'tи "Male or Female - M or F ? " sex$+~з sex$<>"" Њ sex$=Ѕ(—(Бsex$,1,1)) Ђ 95)$€з sex$<>"M" Ђ sex$<>"F" Њ FLAG=Ј-’з ¬ FLAG Њ с "No more sex(es) please !!!"
њэ FLAG	¦=sex$ яясN GeP Z Z d d n n x x ‚ ‚ Њ Њ – –    
 ф F_WSER :8 ф EXAMPLE OF WRITING TO A SERIAL CHARACTER DATA FILE( :F2 ф This program openes a data file and writes serial character data@< ф to it.  The use of OPENOUT ensures that, eaven if the file<F ф existed before, it is cleared before being written to.P :Z :d phonenos=® "PHONENOS"6n с "File Name PHONENOS Opened as Channel ";phonenosx с‚ хЊ и "Name ? " name$– з name$="" Њ т_end› и "Phone Number ? " phone$  сЄ с#phonenos,name$,phone$ґ э Јѕ :И Э т_endТ Щ#phonenos                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 length (0) as the first record.|ф Return the file number.†:ђЭ ¤_open(name$)
љк fnum¤fnum=®(name$)®с#fnum,0	ё=fnumВ:М:EЦф Write the length of the file to the first record and then close/аф the file.  Return the length of the file.к:фЭ ¤_close(fnum)юк EOFfnumEOFfnum=Џ#fnum-1П#fnum=0с#fnum,EOFfnum
&Щ#fnum0=EOFfnum::D:DNф Accept a name from the keyboard and make sure it consists onlyCXф of spaces and upper or lower case characters.  Leading spaceh upperBф or lower case M or F are acceptable.  The returned string isф truncated to 1 character.$:.Э ¤_sex8к sex$,FLAGBх
LFLAG=№'Vи "Male or Female - M or F ? " sex$+`з sex$<>"" Њ sex$=Ѕ(—(Бsex$,1,1)) Ђ 95)$jз sex$<>"M" Ђ sex$<>"F" Њ FLAG=Ј-tз ¬ FLAG Њ с "No more sex(es) please !!!"
~э FLAG	€=sex$ яя  ave            < F F P P Z Z d d n n x x ‚ ‚ Њ                                                                                                                                
 ф F_WSTD :/ ф EXAMPLE OF WRITING A COMPATIBLE DATA FILE( :E2 ф This program opens a data file and writes numeric and characterA< ф data to it in a compatible format.  Numerics are changed to<F ф strings before they are written and the data items are>P ф separated by commas.  Each record is terminated by CR LF0Z ф and the file is terminated by a Control Z.d :n :?x ф Functions are used to accept and validate the data before‚ ф writing it to the file.Њ :– :5  record$=Д100," "): ф Resbe in error.b:lЭ ¤_age	vк ageЂхЉи "What age ? " age<”з age<=0 „ age >=150 Њ с "No impossible ages please !!!"ћэ age>0 Ђ age<150Ё=Ё(age*10+.5)/10І:ј:EЖф Accept the height in centimeters from the keyboard and round toFРф an integer. Heights of 50 or less and 230 or more are consideredЪф to be in error.д:оЭ ¤_heightшк heightх'и "Height in centimeters ? " height4з height<=50 „ height>=230 Њ с "Verry funny !!!" э height>50 Ђ height<230*=Ё(height+.5)4s)bф are automatically ignored on input.l:vЭ ¤_nameЂк name$,FLAG,nЉх
”FLAG=№ћи "Name ? " name$Ёз name$="" Њ ЌddBІг I=1 ё ©(name$)јn=—(Бname$,I,1))3Жз ¬(n=32 „ n>64 Ђ n<91 „ n>96 Ђ n<123) Њ FLAG=№Рн1Ъз ¬ FLAG Њ с "No funny characters please !!!"
дэ FLAG
о=name$ш::Jф Accept the age from the keyboard and round to one place of decimals.Fф Ages of 0 and less or 150 or more are considered to be in error. :*Э ¤_age	4к age>хHи "What age ? " age<Rз                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 erve room for the longest4Є name$=Д20," ")     ф record necessary.  It saves0ґ :                         ф on string space.ѕ compat=®("COMPAT")2И с "File Name COMPAT Opened as Channel ";compatТ сЬ хж name$=¤_nameр з name$="" Њ т_endъ age=¤_ageheight=¤_heightsex$=¤_sexс3"record$=name$+","+Г(age)+","+Г(height)+","+sex$,с#compat,record$6Х#compat,&0A@э ЈJ:TЭ т_end^Х#compat,&1AhЩ#compatrа|:†:Dђф Accept a name from the keyboard and make sure it consists:>:HHф Accept the sex from the keyboard.  Only words beginning with upperBRф or lower case M or F are acceptable.  The returned string is\ф truncated to 1 character.f:pЭ ¤_sexzк sex$,FLAG„х
ЋFLAG=№'и "Male or Female - M or F ? " sex$+ўз sex$<>"" Њ sex$=Ѕ(—(Бsex$,1,1)) Ђ 95)$¬з sex$<>"M" Ђ sex$<>"F" Њ FLAG=Ј-¶з ¬ FLAG Њ с "No more sex(es) please !!!"
Аэ FLAG	К=sex$ яясN¬ ecord$ d¦BPAULINE SMITH,32,153,F                                                                    age<=0 „ age >=150 Њ с "No impossible ages please !!!"\э age>0 Ђ age<150f=Ё(age*10+.5)/10p:z:E„ф Accept the height in centimeters from the keyboard and round toFЋф an integer. Heights of 50 or less and 230 or more are consideredф to be in error.ў:¬Э ¤_height¶к heightАх'Ки "Height in centimeters ? " height4Фз height<=50 „ height>=230 Њ с "Verry funny !!!"Юэ height>50 Ђ height<230и=Ё(height+.5)т:ь:Hф Accept the sex from the keyboard.  Only words beginning wit                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 onlyCљф of spaces and upper or lower case characters.  Leading spaces)¤ф are automatically ignored on input.®:ёЭ ¤_nameВк name$,FLAG,nМх
ЦFLAG=№аи "Name ? " name$кз name$="" Њ ЌTfBфг I=1 ё ©(name$)юn=—(Бname$,I,1))3з ¬(n=32 „ n>64 Ђ n<91 „ n>96 Ђ n<123) Њ FLAG=№н1з ¬ FLAG Њ с "No funny characters please !!!"
&э FLAG
0=name$::D:JNф Accept the age from the keyboard and round to one place of decimals.FXф Ages of 0 and less or 150 or more are considered to                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 "d ф. MERGE UTILITY FOR BBC BASICn ф. R.T.RUSSELL, 16-10-1982x :$‚ Ю A(1),B(1),C(1),F(1),L(1),A$(1)Њ :– х  и "FILE 1",F1$Є F(0)=­(F1$)ґ з F(0)=0 с "File not found"ѕ э F(0)<>0И :Т хЬ и "FILE 2",F2$ж F(1)=­(F2$)р з F(1)=0 с "File not found"ъ э F(1)<>0:и "OUTPUT FILE",F3$F3=®(F3$)!"з F3=0 с "Directory full" : а,:6тREAD(0):тREAD(1)@х7Jз L(0)<L(1) тWRITE(0):тREAD(0) ‹ тWRITE(1):тREAD(1)Tэ Е#F(0) Ђ Е#F(1)^Х #F3,0hЩ#0rа|:$†Э тREAD(F):з Е#F(F) L                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                version of BBC BASIC (Z80) is made available for free
download on the condition that it always be distributed with the above
files.  BBCBASIC (Z80) and the accompanying files remain the Copyright
(C) of R. T. Russell, 1982-2000.

Richard Russell, 8th June 2000.
Email: richard@rtrussell.co.uk  Web: http://www.rtrussell.co.uk/
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                (F)=65536:б4ђA(F)=љ#F(F):B(F)=љ#F(F):C(F)=љ#F(F):и#F(F),A$(F)љL(F)=B(F)+256*C(F)¤б®:ёЭ тWRITE(F),ВХ#F3,A(F):Х#F3,B(F):Х#F3,C(F):с#F3,A$(F)Мб яя:с#F3,A$(F)Мб яяA      я      (       я    <(            (            $(                                                                                                                                                                                                                                                                   This is version 3.00 of BBCBASIC(Z80).  The files supplied are as follows:

     BBCBASIC.COM   The BBC BASIC (Z80) interpreter for CP/M systems.
     BBCBASIC.TXT   A plain text documentation file for BBC BASIC (Z80).
     CONVERT.COM    A utility for converting .BBC files to/from .BAS files.
     CRC.COM        A program to test the integrity of the supplied files.
     CRCKLIST.CRC   The data file for CRC.COM.
     BBCDIST.MAC    The source file for the BBC BASIC customisation patch.
     MERGE.B                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                BC      A BBC BASIC program for merging program files.
     SORT.BBC       A program using assembler code for a fast string sort.
     SORTREAL.BBC   A program using assembler code for a fast numeric sort.
     F-????.BBC     A set of example programs illustrating file input/output.
     ANIMAL.BBC     An example of a 'learning' program written in BBC BASIC.
     ANIMAL.DAT     The initial data file for ANIMAL.BBC
     READ.ME        This file!

To exit BBC BASIC (Z80) type *BYE

The generic CP/M "
 ф. SHELL SORT ON STRING ARRAYS= ф. (c) Richard Russell 1982, from an idea by Robin Tracy. Ю sort 300( exterr=&2092 г pass=0 ё 1< P%=sortF [OPT pass*2P LD A,(IX):DEC A:JP NZ,error"Z LD A,(IX+1):CP &81:JP NZ,error)d LD L,(IX+2):LD H,(IX+3):LD (start),HLHn DEC HL:LD D,(HL):DEC HL:LD E,(HL):DEC HL:LD A,(HL):DEC A:JP NZ,errorEx LD HL,(start):ADD HL,DE:ADD HL,DE:ADD HL,DE:ADD HL,DE:LD (end),HL#‚ SRL D:RR E:LD HL,&FFFF:EX DE,HL:Њ .rotate SRL D:RR E:„ A:SBC HL,DE:ADD HL,DE:JR C,rotate8– EX 000 6-character strings..."rЮ A$(999)6|г I=0 ё 999:A$(I)="PQRS"+Ѕ(64+і(26))+Ѕ(64+і(26)):н%†г I=0 ё 14:с A$(I),;:н:с "etc..."ђс "Sorting the strings...":љЦ sort,A$(0) : ф. Call assembly language sort routine.%¤г I=0 ё 14:с A$(I),;:н:с "etc..."®с "Finished." яяЉAort  @   Э~ =ВAЭ~юЃВAЭnЭf"A+V+^+~=ВA*A"AЛ:Л!яялЛ:Л·нR8цл))"Aлэ*Aэеээ"AЭбЭ"	AЭ~ эѕ 8э                                                                                                                                BC HL,DE:ADD HL,DE:JR C,okDPUSH HL:POP IY:LD DE,(spacer):SBC HL,DE:PUSH HL:POP IX:JR newlen;3".ok LD HL,(item):LD BC,5:ADD HL,BC:LD (item),HL:,PUSH HL:POP IX:LD DE,(spacer):ADD HL,DE:PUSH HL:POP IY>6LD DE,(end):SBC HL,DE:JR C,newlen:LD DE,(space):SRL D:RR E@LD A,D:„ E:JP NZ,loop:RETJ;@T.fcp LD A,H:XOR D:LD A,H:RLA:RET M:JR NC,fcp0:Ц fcp0:CCF:RETC^.fcp0 LD A,C:CP B:RET NZ:SBC HL,DE:RET NZ:EXX:SBC HL,DE:EXX:RETh;=r.start ЭW 0:.end ЭW 0:.spacer ЭW 0:.check ЭW 0:.item ЭW 0*|.space ееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееDE,HL:ADD HL,HL:ADD HL,HL:LD (spacer),HL:EX DE,HLK  .loop LD IY,(start):PUSH IY:ADD IY,DE:LD (check),IY:POP IX:LD (item),IX@Є .newlen LD A,(IX):CP (IY):JR C,short:LD A,(IY):.short LD B,AAґ „ A:JR Z,null:LD E,(IX+2):LD D,(IX+3):LD L,(IY+2):LD H,(IY+3)Fѕ .next LD A,(DE):CP (HL):JR C,ok:JR NZ,swap:INC DE:INC HL:DJNZ next$И .null LD A,(IY):CP (IX):JR NC,ok4Т .swap PUSH IX:POP HL:PUSH IY:POP DE:LD B,4:.moveJЬ LD A,(DE):LD C,A:LD A,(HL):LD (DE),A:LD (HL),C:INC HL:INC DE:DJNZ move@ж LD DE,(check):PUSH IX:P(
 ф. SHELL SORT ON REAL NUMERIC ARRAYS= ф. (c) Richard Russell 1984, from an idea by Robin Tracy. Ю sort 300( exterr=&2092 г pass=0 ё 1< P%=sortF [OPT pass*2P LD A,(IX):DEC A:JP NZ,error Z LD A,(IX+1):CP 5:JP NZ,error)d LD L,(IX+2):LD H,(IX+3):LD (start),HLHn DEC HL:LD D,(HL):DEC HL:LD E,(HL):DEC HL:LD A,(HL):DEC A:JP NZ,errorx ;C‚ LD HL,(start):ADD HL,DE:ADD HL,DE:ADD HL,DE:ADD HL,DE:ADD HL,DEBЊ LD (end),HL:SRL D:RR E:LD HL,&FFFF:EX DE,HL:.rotate SRL D:RR E;– „ A:SBC HL,DE:ADD HL,DEЭW 0:.error LD A,100:Ц exterr:] †$P%="Bad sort parameters"+Ѕ0
ђн passљ:¤ф. Test program:®:	ё@%=20$Вс "Filling 1000 real numbers..."МЮ A(999)/Цг I=0 ё 999:A(I)=(0.5-і(1))*10^(10-і(20)):н%аг I=0 ё 14:с A(I);:н:с "  etc..."кс "Sorting the numbers..."9фЦ sort,A(0) : ф. Call assembly language sort routine.%юг I=0 ё 14:с A(I);:н:с "  etc..."с "Finished."@%=&90A яяDort ›B   Э~ =ВљCЭ~юВљCЭnЭf"ЋC+V+^+~=ВљC*ЋC"ђCЛ:Л!яялЛ:Л·нR8цнSCbk))"’Cлэ*ЋCэеээ"”CЭбЭ"–CЩЭn ЭfееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееееOP HL:„ A:SBC HL,DE:ADD HL,DE:JR C,okDр PUSH HL:POP IY:LD DE,(spacer):SBC HL,DE:PUSH HL:POP IX:JR newlen3ъ .ok LD HL,(item):LD BC,4:ADD HL,BC:LD (item),HL:PUSH HL:POP IX:LD DE,(spacer):ADD HL,DE:PUSH HL:POP IYELD DE,(end):SBC HL,DE:JR C,newlen:LD DE,(spacer):SRL D:LD A,E:RRA2Ђ &FC:LD E,A:„ D:LD (spacer),DE:JP NZ,loop:RET=".start ЭW 0:.end ЭW 0:.spacer ЭW 0:.check ЭW 0:.item ЭW 0,.error LD A,100:Ц exterr:] 6$P%="Bad sort parameters"+Ѕ0
@н passJ:Tф. Test program:^:+hс "Filling 1:JR C,rotate:.loop LD (space),DEG  LD H,D:LD L,E:ADD HL,HL:ADD HL,HL:ADD HL,DE:LD (spacer),HL:EX DE,HLEЄ LD IY,(start):PUSH IY:ADD IY,DE:LD (check),IY:POP IX:LD (item),IXґ ;ѕ .newlenEИ EXX:LD L,(IX):LD H,(IX+1):EXX:LD L,(IX+2):LD H,(IX+3):LD C,(IX+4)EТ EXX:LD E,(IY):LD D,(IY+1):EXX:LD E,(IY+2):LD D,(IY+3):LD B,(IY+4)Ь Ц fcp:JR C,okж ;4р .swap PUSH IX:POP HL:PUSH IY:POP DE:LD B,5:.moveJъ LD A,(DE):LD C,A:LD A,(HL):LD (DE),A:LD (HL),C:INC HL:INC DE:DJNZ move@LD DE,(check):PUSH IX:POP HL:„ A:S