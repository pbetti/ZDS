.po 4
.. originally dif.rno, for some other wp, presumably roff
..
    Reducing the Swelling of the Phone Bill with DIF and SSED
                        November 17, 1981
                         Chuck Forsberg
                    Computer Development Inc
                          Beaverton OR

	Latelù  (iæ noô sooner© iô haó becomå obviouó thaô  therå 
musô  bå á betteò anä cheapeò waù tï distributå softwarå  updateó 
tï  changinç  programó thaî tï transmiô alì oæ thå ne÷  fileó  iî 
theiò  totality¬  eveî thougè onlù á fe÷ lineó iî eacè havå  beeî 
changed.

	Foò  somå yearó thå Uniø differentiaì filå prinô  prograí 
diff(1©  (thå  (1© referó tï thå sectioî oæ thå Uniø  Programmeró 
Manuaì iî whicè iô ió described© haó haä á -å flaç whicè provideó 
á seô oæ eä commandó suitablå foò transforminç thå firsô filå  tï 
thå second.

	Witè   theså   tools¬   onlù  aî  updatå  filå  neeä   bå 
transmitted¬  provided¬  oæ course¬  thaô botè thå sendeò anä thå 
receiveò haä copieó oæ thå samå antecdenô file.

	É havå writteî á "new¢ difæ calleä dif.ã whicè manageó tï 
operatå iî thå primitivå CP/Í environment®  Thå editinç  commandó 
outpuô  iî responså tï thå -å optioî refrencå sequentiaì lineó iî 
thå  sourcå files¬  sï theù (thå commands© caî bå executeä  bù  á 
streaí  editor®  (Thå Uniø diff(1© createó differencå fileó  witè 
non-forward-sequentiaì commands.© 

	To generate a difference file, the command is

	dif -e oldfile newfile >file.dif

	Thå  >file.diæ redirectó thå standarä outpuô tï thå file®  
Á  « maù bå susbtituteä foò ¾ iæ simultaneouó consolå  outpuô  ió 
desired.

	The receiver then invokes:

	ssed oldfile <file.dif >newfile

	Whicè  wilì resulô iî newfilå beinç createä identicaì  tï 
thå  originaì  newfile®    Well¬  noô  preciselù  identical¬  buô 
identicaì uğ tï anä includinç thå EOÆ (^Z© character® Thå dribblå 
afteò  thaô maù change¬  sï CRCË maù saù theù arå different®   Tï 
check¬ comparå thå twï fileó witè dif.

	Uniø folkó witè 1´ characteò filå nameó anä  modificatioî  
timeó  storeä  bù thå filesysteí havå littlå troublå keepinç  thå 
fileó  synchronized®  (Iæ  thå  antecedenô fileó  arå  different¬  
there'ó nï tellinç whaô  thå outpuô filå wilì looë like!© Foò  uó 
pooò  CP/Í folkó (verrry© patientlù awaitinç somethinç likå  Uniø 
tï appeaò magicallù oî ouô desktops¬  É proposå thaô thå revisioî 
oò revisioî datå oæ thå antecedenô filå bå placeä iî thå ne÷ filå 
adjacenô  tï  thå ne÷ revisioî oò date¬  preferablù oî  thå  samå Šline® Thió waù thå useò maù easilù verifù thaô hå haó thå correcô 
antecedent.

	Diæ  Versionó  1.1° anä lateò placå hasè indiceó  oæ  thå 
RETAINEÄ  lineó oæ thå antecedenô filå iî thå differencå  output® 
Thió  allowó  sseä  1.1° oò lateò tï verifù  correctnesó  oæ  thå 
antecedenô  file®  thå ne÷ .diæ fileó arå compatiblå witè thå olä 
ssed¬ but¬ alas¬ noô witè Uniø eä oò sed.

	Thå  arraù sizeó iî dif.ã maù havå tï bå shrunë  somewhaô 
tï ruî oî á 48ë system.

	For testing, give

	dif -e filea fileb |ssed filea >filec
	dif fileb filec

	(fileb and filec should be identical)

	It ought to work if you said
	dif -e filea fileb |ssed filea |dif fileb
	and it does, with version 2.0.

	Versioî 2.° oæ dif.ã addó á -õ flaç whicè wilì  unsqueezå 
fileá beforå comparinç iô tï fileb.

	Thus you can say
	sq filea
	dif -eu filea.qqq fileb |ssed filea |dif fileb

	Or you can say
	dif -eu filea.qqq fileb |ssed -u filea.qqq |dif fileb
	to test dif and ssed.

(Bå surå diæ anä sseä arå exactlù wherå yoõ saù theù are¬ oò elså 
pipeó wilì bå broken.)

	Restrictionº   Sincå thå BDÓ Standarä I/Ï librarù anä thå 
Directeä  I/Ï  packagå  arå somewhaô confuseä  abouô  translatioî 
betweeî  CP/M'ó cr/læ terminateä lineó anä **nixs§ \î  terminateä 
lines¬ diæ waó writteî tï striğ cr'ó froí thå inpuô iî ordeò thaô 
onlù onå cò appeaò oî thå output®  Aó á result¬  lineó terminateä 
bù cr/lf¬  lf¬  anä lf/cò alì comå ouô thå same¡ Thió woulä mungå 
fileó  wherå  lf/cò haó á speciaì  meaninç  (MBASIÃ  continuatioî 
lines© oò wherå embeddeä cr'ó arå useä (RTTÙ art)® 

	Unix is a trademark of WECO, CP/M of Digital Research.
